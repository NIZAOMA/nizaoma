(function (a) {
    with (a) {
        a.WC = function (b, c) { var d = k; if ("delete" === c && (d = iu.Zr ? "debugger" : window.prompt("请输入删除理由"), !d)) return; b.xhr = new V(j); b.zb && P(b.h(), b.xhr, "success", b.qe); b.xhr.ajax("/reviewq/answer?queue_id=" + b.Kb + "&is_realm=" + b.Xd, "action=" + c + "&answer_id=" + b.ba.getAttribute("data-answer_id") + "&task_id=" + b.ba.getAttribute("data-task_id") + (d ? "&reason=" + d : "") + "&none_queue=" + b.ba.getAttribute("data-none_queue")) }, a.XC = function (b, c) {
            b.xhr = new V(j); b.zb && P(b.h(), b.xhr, "success", b.qe); b.xhr.ajax("/reviewq/question?queue_id=" +
            b.Kb + "&is_realm=" + b.Xd, "action=" + c + "&question_id=" + b.ba.getAttribute("data-question_id") + "&task_id=" + b.ba.getAttribute("data-task_id") + "&none_queue=" + b.ba.getAttribute("data-none_queue"))
        }, a.YC = ["delete", "delete_answer"], a.ZC = function (b) { if (A && !Gb(9)) { var c = m; try { c = b.parentNode } catch (d) { } return !!c } return tc(b.ownerDocument.body, b) }, a.$C = function (b, c) { return b.ca.m(c ? b.MH : b.jD) };
        qq.prototype.Rf = Z(64, function () { var b = this.Vq.body.createTextRange(); b.moveToElementText(this.Vq.body); return this.tg(new qq(b, this.Vq), j) }); Aq.prototype.Rf = Z(63, function () { return (!this.va || ZC(this.va)) && (!this.sa || ZC(this.sa)) && (!(A && !Gb(9)) || Eq(this).Rf()) }); Gq.prototype.Rf = Z(62, function () { var b = m; try { b = z.every(this.Kh(), function (b) { return A ? !!b.parentNode : tc(b.ownerDocument.body, b) }) } catch (c) { } return b }); Mq.prototype.Rf = Z(61, function () { return z.every(bq(this), function (b) { return b.Rf() }) });
        iq.prototype.cj = Z(56, function () { return 3 != this.da.nodeType ? -1 : this.da == this.va ? this.Ca : 0 }); Kq.prototype.cj = Z(55, s(0)); Oq.prototype.cj = Z(54, function () { return this.Sf[this.Pk].cj() }); dy.prototype.Ew = Z(49, function (b, c, d, e, g) { var h = g || "question", b = "question" === h ? "问题" : "答案"; z.contains(YC, e) ? Di({ title: d + b, content: "确定要" + d + "这个" + b + "吗？", Fi: ["取消", "确定" + d] }, function (b) { b ? "question" === h ? XC(this, e) : WC(this, e) : this.locked = m }, this) : "question" === h ? XC(this, e) : WC(this, e) });
        lq.prototype.Vd = Z(46, function () { var b = Tb(this.Q.startContainer).w("div"); b.appendChild(this.Q.cloneContents()); b = b.innerHTML; if (Ea(b, "<") || !this.isCollapsed() && !Xa(b, "<")) return b; var c = this.yc(), c = 1 == c.nodeType ? c : c.parentNode; return Vs(c.cloneNode(m)).replace(">", ">" + b) }); qq.prototype.Vd = Z(45, function () { return this.Q.htmlText }); Aq.prototype.Vd = Z(44, function () { return Eq(this).Vd() }); Gq.prototype.Vd = Z(43, function () { return this.Dg() }); Mq.prototype.Vd = Z(42, function () { return z.map(bq(this), function (b) { return b.Vd() }).join("") });
        iq.prototype.aj = Z(41, function () { return 3 != this.da.nodeType ? -1 : this.da == this.sa ? this.za : this.da.nodeValue.length }); Kq.prototype.aj = Z(40, s(0)); Oq.prototype.aj = Z(39, function () { return this.Sf[this.Pk].aj() }); $p.prototype.ag = Z(38, function (b) { this.isCollapsed() || this.Yc(); return this.insertNode(b, j) }); Gq.prototype.ag = Z(37, function (b) { b = this.insertNode(b, j); this.isCollapsed() || this.Yc(); return b });
        Xp.prototype.restore = Z(35, function (b) { this.zg && Yp.log(ce, "Disposed SavedRange objects cannot be restored.", i); var c = this.Wj(); b || this.H(); return c }); Fq.prototype.Wj = Z(34, function () { return Dq(this.EB, this.gK, this.yD, this.mM) }); Lq.prototype.Wj = Z(33, function () { for (var b = (this.Ya.length ? Sb(this.Ya[0]) : document).body.createControlRange(), c = 0, d = this.Ya.length; c < d; c++) b.addElement(this.Ya[c]); return Hq(b) });
        Pq.prototype.Wj = Z(32, function () { var b = z.map(this.wz, function (b) { return b.restore() }), c = new Mq; c.Zl = b; c.Te = z.map(b, function (b) { return b.Sd() }); return c }); jq.prototype.Dg = Z(25, function () { var b = new Ts; O.forEach(this, function (c, d, e) { 3 == c.nodeType ? b.append(Va(c.nodeValue.substring(e.cj(), e.aj()))) : 1 == c.nodeType && (-1 == e.dc ? hc(c) && b.append("</" + c.tagName + ">") : (d = c.cloneNode(m), d = Vs(d), A && "LI" == c.tagName ? b.append(d) : (c = d.lastIndexOf("<"), b.append(c ? d.substr(0, c) : d)))) }, this); return b.toString() });
        Aq.prototype.Dg = Z(24, function () { return Eq(this).Dg() }); Gq.prototype.Dg = Z(23, function () { return z.map(Jq(this), Vs).join("") }); Mq.prototype.Dg = Z(22, function () { return this.Vd() }); Zp.prototype.fp = Z(16, function () { var b = this.Nc ? -1 : 1; this.dc == b && (this.dc = -1 * b, this.depth += this.dc * (this.Nc ? -1 : 1)) }); iq.prototype.fp = Z(15, function () { iq.n.fp.apply(this); tc(this.da, this.sa) && f(O.bb) }); Jd.prototype.setInterval = Z(11, function (b) { this.Kg = b; this.oa && this.enabled ? (this.stop(), this.start()) : this.oa && this.stop() });
        $n.prototype.tw = Z(10, function () { return this.m().innerHTML }); hq.prototype.fh = Z(9, function (b, c) { this.insertNode(b, j); this.insertNode(c, m) });
        lq.prototype.fh = Z(8, function (b, c) { var d = bc(Sb(this.W())); if (d = Rq(d)) var e = d.W(), g = d.ha(), h = d.ua(), l = d.Ia(); var n = this.Q.cloneRange(), q = this.Q.cloneRange(); n.collapse(m); q.collapse(j); n.insertNode(c); q.insertNode(b); n.detach(); q.detach(); if (d) { if (3 == e.nodeType) for (; h > e.length;) { h -= e.length; do e = e.nextSibling; while (e == b || e == c) } if (3 == g.nodeType) for (; l > g.length;) { l -= g.length; do g = g.nextSibling; while (g == b || g == c) } Dq(e, h, g, l).select() } });
        qq.prototype.fh = Z(7, function (b, c) { var d = this.Q.duplicate(), e = this.Q.duplicate(); wq(d, b, j); wq(e, c, m); this.re() }); Aq.prototype.fh = Z(6, function (b, c) { Eq(this).fh(b, c); this.re() }); lq.prototype.Yc = Z(5, function () { var b = this.Q; b.extractContents(); if (b.startContainer.hasChildNodes() && (b = b.startContainer.childNodes[b.startOffset])) { var c = b.previousSibling; "" == Hc(b) && L(b); c && "" == Hc(c) && L(c) } });
        qq.prototype.Yc = Z(4, function () { if (!this.isCollapsed() && this.Q.htmlText) { var b = this.W(), c = this.ha(), d = this.Q.text, e = this.Q.duplicate(); e.moveStart("character", 1); e.moveStart("character", -1); e.text == d && (this.Q = e); this.Q.text = ""; this.re(); d = this.W(); e = this.ua(); try { var g = b.nextSibling; b == c && (b.parentNode && 3 == b.nodeType && g && 3 == g.nodeType) && (b.nodeValue += g.nodeValue, L(g), this.Q = sq(d), this.Q.move("character", e), this.re()) } catch (h) { } } }); Aq.prototype.Yc = Z(3, function () { Eq(this).Yc(); this.re() });
        Gq.prototype.Yc = Z(2, function () { if (this.Q) { for (var b = [], c = 0, d = this.Q.length; c < d; c++) b.push(this.Q.item(c)); z.forEach(b, L); this.collapse(m) } }); Mq.prototype.Yc = Z(1, function () { z.forEach(bq(this), function (b) { b.Yc() }) });
        a.aD = function (b, c) { var d = c.jd(); b.nd[d] && b.Nb.log(ce, "Cannot register the same class of plugin twice.", i); b.nd[d] = c; for (var e in Hv) c[Hv[e]] && b.oj[e].push(c); c.D = b; b.Wd() && c.enable(b) }, a.bD = function (b) { return b.D && b.D.ib }, a.cD = function (b) { var c = b.da.parentNode; return new Qs(c, z.indexOf(c.childNodes, b.da)) }, a.dD = function (b, c, d, e) { return Dq(b, c, d, e) }, a.eD = function (b) { M.call(this); this.MH = db(); this.jD = db(); this.ca = Tb(b.Da()); b.fh(this.ca.w("SPAN", { id: this.MH }), this.ca.w("SPAN", { id: this.jD })) }; y(eD, Xp);
        eD.prototype.Io = function (b) { L($C(this, j)); L($C(this, m)); return b }; eD.prototype.Wj = function () { var b = k, c = $C(this, j), d = $C(this, m); if (c && d) { var b = c.parentNode, c = z.indexOf(b.childNodes, c), e = d.parentNode, d = z.indexOf(e.childNodes, d); e == b && (d -= 1); b = Dq(b, c, e, d); b = this.Io(b); b.select() } else this.Io(); return b }; eD.prototype.z = function () { this.Io(); this.ca = k };
        a.fD = function (b) { var c; if (3 == b.da.nodeType) for (c = b.da.previousSibling; c && 3 == c.nodeType; c = c.previousSibling) b.offset += Rs(c); else c = b.da.previousSibling; var d = b.da.parentNode; b.da = c ? c.nextSibling : d.firstChild; return b }, a.gD = function (b, c) { return c ? Ss(b.W(), b.ua()) : Ss(b.ha(), b.Ia()) }, a.hD = function (b) { for (var c = k, d = b.firstChild; d;) { var e = d.nextSibling; 3 == d.nodeType ? "" == d.nodeValue ? b.removeChild(d) : c ? (c.nodeValue += d.nodeValue, b.removeChild(d)) : c = d : (hD(d), c = k); d = e } }, a.iD = function (b) {
            var c = b && b.nodeName.toLowerCase();
            return !(!b || "block" != (1 != b.nodeType ? k : A ? Wf(b, "display") : Vf(b, "display")) && !("td" == c || "table" == c || "li" == c))
        }, a.jD = function (b) { return Ic(b, iD, j) }, a.kD = function (b, c) {
            if (c) {
                var d, e = fD(gD(c, j)), g = cD(e), h = e.da.previousSibling; 3 == e.da.nodeType && (e.da = k); var l = fD(gD(c, m)), n = cD(l), q = l.da.previousSibling; 3 == l.da.nodeType && (l.da = k); d = function () {
                    !e.da && h && (e.da = h.nextSibling, e.da || (e = new Qs(h, Rs(h)))); !l.da && q && (l.da = q.nextSibling, l.da || (l = new Qs(q, Rs(q)))); return Dq(e.da || g.da.firstChild || g.da, e.offset, l.da ||
                    n.da.firstChild || n.da, l.offset)
                }; var r = jD(c.Eb())
            } r ? (r = xc(r, b), A ? hD(r) : r.normalize()) : b && (A ? hD(b) : b.normalize()); return d ? d() : k
        }, a.lD = function (b, c, d) { It.call(this, c, b || dz.T(), d) }; y(lD, It); a.mD = function (b) { return b.getAttribute && "true" == b.getAttribute("g_editable") }, a.nD = function (b) { eD.call(this, b) }; y(nD, eD); nD.prototype.Io = function (b) { var c = $C(this, j), d = $C(this, m), c = c && d ? xc(c, d) : c || d; nD.n.Io.call(this); if (b) return kD(c, b); c && (b = Rq(bc(Sb(c))), (b = kD(c, b)) && b.select()) };
        a.oD = function (b, c, d) { for (var e = (c = 1 == c) ? b.W() : b.ha(), g = c ? b.ua() : b.Ia(), h = b.Eb() ; e != h && e != d && !(c && 0 != g || !c && g != Rs(e)) ;) var l = e.parentNode, e = z.indexOf(l.childNodes, e), g = c ? e : e + 1, e = l; return dD(c ? e : b.W(), c ? g : b.ua(), c ? b.ha() : e, c ? b.Ia() : g) }, a.pD = function (b) {
            tg(b, m); if ($q) for (var c = b, b = b.parentNode; b && "HTML" != b.tagName;) {
                if (sg ? "none" == b.style[sg].toLowerCase() : (A || rb) && "on" == b.getAttribute("unselectable")) {
                    tg(b, m, j); for (var d = 0, e = b.childNodes.length; d < e; d++) {
                        var g = b.childNodes[d]; g != c && 1 == g.nodeType && tg(b.childNodes[d],
                        j)
                    }
                } c = b; b = b.parentNode
            }
        }, a.qD = function (b) { var c = b.target.tagName; "TEXTAREA" != c && "INPUT" != c && b.preventDefault() }, a.rD = void 0, a.sD = function (b) { var c = b.Eb(); return b.W() != c.parentElement && mD(c) || !!Ic(c, mD) }, a.tD = function (b, c) { var d = oD(b, 1, c), d = oD(d, 0, c), e = d.W(), g = d.ha(), h = d.ua(), d = d.Ia(); if (e == g) { for (; g != c && 0 == h && d == Rs(g) ;) e = g.parentNode, h = z.indexOf(e.childNodes, g), d = h + 1, g = e; e = g } return Dq(e, h, g, d) }, a.uD = function (b, c) {
            $q && c.e(b, "mousedown", qD, j); tg(b, j); for (var d = b.getElementsByTagName("INPUT"), e = 0, g =
            d.length; e < g; e++) { var h = d[e]; h.type in sr && pD(h) } z.forEach(b.getElementsByTagName("TEXTAREA"), pD)
        }, a.vD = function (b) { return !!qr[b.tagName] }, a.wD = function (b) { return it(O.filter(new gt(b), ht)) }, a.xD = void 0, a.yD = function (b) { var c = arguments, d = c.length; return function () { for (var b = 0; b < d; b++) if (!c[b].apply(this, arguments)) return m; return j } }, a.zD = function (b) { this.zf = b; this.ZO = j; this.Wv = [] }, a.AD = function (b) { b.qv || (b.qv = Hc(b.zf)); return b.qv }; a.BD = function () { Gv.call(this) }; y(BD, Gv); BD.prototype.jd = s("BTF"); BD.prototype.Nb = me("goog.editor.plugins.BasicTextFormatter");
        a.CD = { $I: "+link", uV: "+formatBlock", HV: "+indent", iW: "+outdent", NW: "+strikeThrough", DV: "+insertHorizontalRule", OW: "+subscript", PW: "+superscript", $W: "+underline", XU: "+bold", JV: "+italic", sV: "+fontSize", rV: "+fontName", qV: "+foreColor", RU: "+backColor", gW: "+insertOrderedList", dX: "+insertUnorderedList", KV: "+justifyCenter", LV: "+justifyFull", NV: "+justifyRight", MV: "+justifyLeft" }, a.DD = F.um(CD); t = BD.prototype; t.Fe = function (b) { return b in DD }; t.xe = function () { return iw(this.D) }; a.ED = function (b) { return bD(b).Da() };
        t.af = function (b, c) {
            var d, e, g, h, l, n = c; switch (b) {
                case "+backColor": if (n !== k) if (fr) { e = n; g = iw(this.D); var q, r; g && g.isCollapsed() && (q = bD(this).createTextNode(B ? " " : ""), n = g.W(), r = 1 == n.nodeType ? n : n.parentNode, "" == r.innerHTML ? (r.style.textIndent = "-10000px", r.appendChild(q)) : (r = bD(this).w("span", { style: "text-indent:-10000px" }, q), g.ag(r)), fq(q).select()); FD(this, "hiliteColor", e, m, j); q && (B && (q.data = ""), r.style.textIndent = "") } else rb ? FD(this, "hiliteColor", n) : FD(this, b, n); break; case "+link": a: {
                    l = n; this.D.jf ||
                    bD(this).Sa().focus(); g = (e = this.xe()) && e.Eb(); if ((g = Jc(g, "A")) && Ic(g, mD)) oc(g); else {
                        g = k; var w = []; if ((n = e && e.Eb()) && "IMG" == n.tagName) l = k; else {
                            if (e && e.isCollapsed()) e = e.ye(0).Sd(), Xq ? (g = bD(this).createElement("A"), e.insertNode(g)) : Wq && (e.pasteHTML("<a id='newLink'></a>"), g = bD(this).m("newLink"), g.removeAttribute("id")); else { var C = db(); FD(this, "CreateLink", C); z.forEach(this.D.m().getElementsByTagName("A"), function (b) { Fa(b.href, C) && w.push(b) }); w.length && (g = w.pop()) } e = g; g = new zD(e); g.zf.href = "/"; l && (e.target =
                            l); w && (g.Wv = w); l = g
                        } if (l) {
                            if (!this.D.execCommand("link", l)) if (h = this.D.Ek.prompt(fA, "http://")) if (e = l, g = AD(l) || h, n = e.zf, n.href = h, q = AD(e), g != q && (h = qt(n), 3 == h.nodeType && (h = h.parentNode), Hc(h) != q && (h = n), jc(h), n = Tb(h), h.appendChild(n.createTextNode(g)), e.qv = k), e.ZO = m, e = l.zf, jr) { g = e.nextSibling; if (!g || !(3 == g.nodeType && (Ea(g.data, " ") || Ea(g.data, " ")))) g = Tb(e).createTextNode(" "), lc(g, e); Tq(g, 1).select() } else Xs(e, m); else {
                                e = fq(l.zf); e = new nD(e); oc(l.zf); for (l.zf = k; l.Wv.length;) oc(l.Wv.pop()); e.restore().select();
                                l = k; break a
                            } break a
                        }
                    } l = k
                } break; case "+justifyCenter": case "+justifyFull": case "+justifyRight": case "+justifyLeft": FD(this, b, k, m, j); B && FD(this, b, k, m, j); (!dr || !B) && O.forEach(iw(this.D), GD); break; default: A && ("+formatBlock" == b && n) && (n = "<" + n + ">"); if ("+foreColor" == b && n === k) break; switch (b) {
                    case "+indent": case "+outdent": dr && (B && (e = j), rb && (e = "+outdent" == b ? !ED(this).queryCommandEnabled("outdent") : j)); case "+insertOrderedList": case "+insertUnorderedList": if (q = mr) q = ED(this), q = HD(this, j, q, b, i); if (q) g = "P" != this.D.queryCommandValue("+defaultTag");
                    else if (!nr && (A || rb)) { d = this.xe(); q = d.Eb(); var I = ED(this); ID.lastIndex = 0; ID.test(q.innerHTML) && (d = d.W() && d.ha() ? new eD(d) : k, "P" == q.tagName ? JD(q, j) : (q.innerHTML = q.innerHTML.replace(ID, '<p$1 trtempbr="temp_br">'), q = z.toArray(q.getElementsByTagName("P")), O.forEach(q, function (b) { if ("temp_br" == b.getAttribute("trtempbr")) { b.removeAttribute("trtempbr"); if (ft(Gc(b))) { var c = A ? I.createTextNode(" ") : I.createElement("BR"); b.appendChild(c) } JD(b) } })), d.restore()) } B && (lr && !this.queryCommandValue(b)) && (q = this.D.queryCommandValue("+defaultTag"),
                    "P" == q || "DIV" == q ? q = m : (q = this.xe(), q.isCollapsed() && 3 != q.yc().nodeType ? (d = bD(this).createTextNode(" "), q.insertNode(d, m), fq(d).select(), q = j) : q = m), h |= q); case "+formatBlock": d = !!this.D.bj("Bidi"); break; case "+subscript": case "+superscript": kr && !this.queryCommandValue(b) && (q = "+subscript" == b ? "+superscript" : "+subscript", r = KD(q), this.queryCommandValue(q) || ED(this).execCommand(r, m, k), ED(this).execCommand(r, m, k)); break; case "+underline": case "+bold": case "+italic": e = B && dr && this.queryCommandValue(b); break;
                    case "+foreColor": case "+fontName": e = dr && B
                } FD(this, b, n, d, !!e); h && ED(this).execCommand("Delete", m, j); g && ED(this).execCommand("FormatBlock", m, "<div>")
            } B && !this.D.Ig && bD(this).Sa().focus(); return l
        };
        t.queryCommandValue = function (b) {
            var c; switch (b) {
                case "+link": return b = (b = this.xe()) && b.Eb(), b = Jc(b, "A"), !!b && !!Ic(b, mD); case "+justifyCenter": case "+justifyFull": case "+justifyRight": case "+justifyLeft": return LD(this, b); case "+formatBlock": var b = iw(this.D), d = k; O.forEach(b, function (b, c, e) { -1 != e.dc && (b = jD(b).tagName, d = d || b, d != b && (d = k, f(O.bb)), e.fp()) }); return d; case "+indent": case "+outdent": case "+insertHorizontalRule": return m; case "+fontSize": case "+fontName": case "+foreColor": case "+backColor": return this.Vs(ED(this),
                b, dr && B); case "+underline": case "+bold": case "+italic": c = dr && B; default: var e = ED(this); return HD(this, j, e, b, c)
            }
        }; t.NG = function (b) { br && b.match(/^\s*<script/i) && (b = "&nbsp;" + b); cr && (b = b.replace(/<(\/?)strong([^\w])/gi, "<$1b$2"), b = b.replace(/<(\/?)em([^\w])/gi, "<$1i$2")); return b };
        t.VK = function (b) { for (var b = b.getElementsByTagName("IMG"), c = 0, d; d = b[c]; c++) if (A) { d.removeAttribute("tabIndex"); d.removeAttribute("tabIndexSet"); var e = d; "removeAttribute" in e && e.removeAttribute(sa); try { delete e[sa] } catch (g) { } d.WP && (d.tabIndex = d.WP) } }; t.WK = function (b) { if (D) { for (var c = Ub(this.D.ib.Ha, "HEAD", i, i), d = [], e = c.length, g = 1; g < e; ++g) for (var h = c[g].getElementsByTagName("STYLE"), l = h.length, n = 0; n < l; ++n) d.push(h[n].outerHTML); return d.join("") + b } return b };
        t.xr = function (b, c, d) { if (!d) return m; var e; switch (c) { case "b": e = "+bold"; break; case "i": e = "+italic"; break; case "u": e = "+underline"; break; case "s": return j } return e ? (this.D.execCommand(e), j) : m };
        a.ID = A ? /<br([^\/>]*)\/?>/gi : /<br([^\/>]*)\/?>(?!<\/(div|p)>)/gi, a.JD = function (b, c) { if (A || rb) { var d = b.outerHTML.replace(/<(\/?)p/gi, "<$1div"); c && (d = d.replace(ID, "</div><div$1>")); rb && !/<\/div>$/i.test(d) && (d += "</div>"); b.outerHTML = d } }, a.KD = function (b) { return 0 == b.indexOf("+") ? b.substring(1) : b }, a.GD = function (b) { b = jD(b); b.align && (b.style.textAlign = b.align, b.removeAttribute("align")) }, a.FD = function (b, c, d, e, g) {
            var h = k; e && (h = b.D.queryCommandValue("rtl") ? "rtl" : b.D.queryCommandValue("ltr") ? "ltr" : k); var c =
            KD(c), l, n; if (A) {
                var q = c; n = []; var e = k, r = b.xe(); l = bD(b); if (q in MD) { var w = r && r.Eb(); if (w) { for (var C = Vb("BLOCKQUOTE", k, w), I, G = 0; G < C.length; G++) if (r.containsNode(C[G])) { I = C[G]; break } if (w = I || Jc(w, "BLOCKQUOTE")) e = l.w("div", { style: "height:0" }), w.appendChild(e), n.push(e), I ? r = Dq(I, 0, e, 0) : r.containsNode(e) && (r = dD(r.W(), r.ua(), e, 0)), r.select() } } I = b.D; !I.tc() && !e && q in ND && (I = I.m(), r && (r.isCollapsed() && !rc(I)) && (e = r.ye(0).Sd(), r = e.duplicate(), r.moveToElementText(I), r.collapse(m), r.isEqual(e) && (r = l.createTextNode(" "),
                I.appendChild(r), e.move("character", 1), e.move("character", -1), e.select(), n.push(r))), e = l.w("div", { style: "height:0" }), I.appendChild(e), n.push(e)); l = n[0]; n = n[1]
            } if (D) { l = c; var R; OD[l] && (R = bD(b).w("div", { style: "height: 0" }, "x"), b.D.m().appendChild(R)); PD[l] && (l = b.D.m(), R = bD(b).w("div", { style: "height: 0" }, "x"), l.insertBefore(R, l.firstChild)); l = R } if (B && (R = c, Eb("1.9") && "formatblock" == R.toLowerCase() && (R = b.xe(), I = R.W(), R.isCollapsed() && (I && "BODY" == I.tagName) && (e = R.ua(), (I = I.childNodes[e]) && "BR" == I.tagName)))) R =
            R.Sd(), R.setStart(I, 0), R.setEnd(I, 0); if (or && "fontsize" == c.toLowerCase()) { var X = tD(iw(b.D), b.D.m()); O.forEach(O.filter(X, function (b, c, d) { return 1 == d.dc && X.containsNode(b) }), function (b) { Tf(b, "font-size", ""); B && (0 == b.style.length && b.getAttribute("style") != k) && b.removeAttribute("style") }) } R = ED(b); if (g && dr && (R.execCommand("styleWithCSS", m, j), rb)) {
                I = []; e = iw(b.D).Eb(); do I.push(e); while (e = e.parentNode); I = O.MK(O.cd(iw(b.D)), O.cd(I)); I = O.filter(I, iD); O.forEach(I, function (b) {
                    var c = b.style.outline; b.style.outline =
                    "0px solid red"; b.style.outline = c
                })
            } R.execCommand(c, m, d); g && dr && R.execCommand("styleWithCSS", m, m); D && (!Eb("526") && "formatblock" == c.toLowerCase() && d && /^[<]?h\d[>]?$/i.test(d)) && O.forEach(b.xe(), function (b) { "Apple-style-span" == b.className && (b.style.fontSize = "", b.style.fontWeight = "") }); if (/insert(un)?orderedlist/i.test(c)) {
                if (D) {
                    var ja = m; O.forEach(b.xe(), function (b) {
                        var c = b.tagName; if ("UL" == c || "OL" == c) if (ja) {
                            if (c = sc(b)) {
                                var d = b.ownerDocument.createRange(); d.setStartAfter(c); d.setEndBefore(b); if (Ha(d.toString()) &&
                                c.nodeName == b.nodeName) { for (; c.lastChild;) b.insertBefore(c.lastChild, b.firstChild); c.parentNode.removeChild(c) }
                            }
                        } else ja = j
                    })
                } if (A) { for (c = (c = b.xe()) && c.yc() ; c && "UL" != c.tagName && "OL" != c.tagName;) c = c.parentNode; c && (c = c.parentNode); c && (d = z.toArray(c.getElementsByTagName("UL")), z.extend(d, z.toArray(c.getElementsByTagName("OL"))), z.forEach(d, function (b) { var c = b.type; if (c && !("UL" == b.tagName ? QD : RD)[c]) b.type = "" })); n && L(n) }
            } l && L(l); h && b.D.execCommand(h)
        }, a.ND = {
            indent: 1, outdent: 1, insertOrderedList: 1, insertUnorderedList: 1,
            justifyCenter: 1, justifyFull: 1, justifyRight: 1, justifyLeft: 1, ltr: 1, rtl: 1
        }, a.MD = { insertOrderedList: 1, insertUnorderedList: 1 }, a.RD = { 1: 1, a: 1, A: 1, i: 1, I: 1 }, a.QD = { disc: 1, circle: 1, square: 1 }, a.OD = { justifyCenter: 1, justifyFull: 1, justifyRight: 1, justifyLeft: 1, formatBlock: 1 }, a.PD = { insertOrderedList: 1, insertUnorderedList: 1 }, a.SD = { center: 1, justify: 1, right: 1, left: 1 }, a.LD = function (b, c) {
            var d = c.replace("+justify", "").toLowerCase(); "full" == d && (d = "justify"); var e = b.D.bj("Bidi"); if (e) return d == e.gY(); var g = b.xe(); if (!g) return m;
            for (var h = g.Eb(), e = z.filter(h.childNodes, function (b) { return ht(b) && g.containsNode(b, j) }), e = e.length ? e : [h], h = 0; h < e.length; h++) { var l = jD(e[h]), n = d, q = Xf(l, "textAlign"), q = q.replace(/^-(moz|webkit)-/, ""); SD[q] || (q = l.align || "left"); if (n != q) return m } return j
        }; BD.prototype.Vs = function (b, c, d) { return HD(this, m, b, c, d) }; a.HD = function (b, c, d, e, g) { e = KD(e); if (g) { var h = ED(b); h.execCommand("styleWithCSS", m, j) } b = c ? d.queryCommandState(e) : d.queryCommandValue(e); g && h.execCommand("styleWithCSS", m, m); return b }; a.TD = function (b, c) { M.call(this); this.Fs = []; for (this.As = []; b && "BODY" != b.nodeName && b != c;) { for (var d = 0, e = b.previousSibling; e;) e = e.previousSibling, ++d; this.Fs.unshift(d); this.As.unshift(b.nodeName); b = b.parentNode } }; y(TD, M); TD.prototype.toString = function () { for (var b = [], c, d = 0; c = this.As[d]; d++) b.push(this.Fs[d] + "," + c); return b.join("\n") }; a.UD = function (b, c) { for (var d, e = c, g = 0; d = b.As[g]; ++g) if (e = e.childNodes[b.Fs[g]], !e || e.nodeName != d) return k; return e }; TD.prototype.z = function () { delete this.Fs; delete this.As }; me("goog.editor.plugins.Blockquote"); a.VD = function () { Gv.call(this) }; y(VD, Gv); t = VD.prototype; t.hh = "DIV"; t.jd = s("EnterHandler"); t.enable = function (b) { VD.n.enable.call(this, b); pr && ("P" == this.hh || "DIV" == this.hh) && bD(this).Da().execCommand("opera-defaultBlock", m, this.hh) }; t.NG = function (b) { return !b || ft(b) ? br ? this.DM() : "" : b }; t.DM = lf("<br>");
        t.rN = function (b) {
            if (B && this.D.Ig) return m; if (8 == b.keyCode) { var c = iw(this.D), d = this.D.m(), c = c && c.W(); d.firstChild == c && At(c) && (b.preventDefault(), b.stopPropagation()) } else if (13 == b.keyCode) if (B) { if (!b.shiftKey) { var d = iw(this.D), c = !d || d.isCollapsed(), e = Xq ? WD(this) : XD(this), g = this.D.execCommand("+splitBlockquote", e); g && (b.preventDefault(), b.stopPropagation()); Xq || e.removeNode(j); g || this.iN(b, c, d) } } else {
                this.D.Ch(); d = Xq ? WD(this) : XD(this); if (c = !!this.D.execCommand("+splitBlockquote", d)) b.preventDefault(),
                b.stopPropagation(); Xq || d.removeNode(j); D && this.jN(b); if (A || rb) ZD(this); else if (!c && D) { if (c = d = iw(this.D)) a: { for (c = d.Eb() ; c; c = c.parentNode) if (vD(c)) { c = "BLOCKQUOTE" == c.tagName; break a } c = m } if (c) { c = bD(this); e = c.createElement("BR"); d.insertNode(e, j); if (d = vD(e.parentNode)) { for (d = e.nextSibling; d && 3 == d.nodeType && !d.nodeValue;) d = d.nextSibling; d = !d } d && kc(c.createElement("BR"), e); Xs(e, m); b.preventDefault() } } this.D.Ze()
            } else if (B && 46 == b.keyCode && (c = iw(this.D), c.isCollapsed() && (d = c.ha(), 1 == d.nodeType && (c = d.childNodes[c.Ia()]) &&
            "BR" == c.tagName))) e = it(O.filter(new gt(c, m, j), ht)), g = c.nextSibling, d.removeChild(c), b.preventDefault(), g && vD(g) && (e && !("BR" == e.tagName || vD(e)) ? Tq(e, Rs(e)).select() : (b = qt(g), Tq(b, 0).select())); return m
        }; t.wr = function (b) { if (B && this.D.Ig) return m; (A || rb) && 13 == b.keyCode && ZD(this, j); return m }; t.jN = ha; t.iN = ha;
        a.$D = F.Ah("LI", "DIV", "H1", "H2", "H3", "H4", "H5", "H6"), a.ZD = function (b, c) {
            for (var d = iw(b.D), e = d.yc(), g = b.D.m(), h; e && e != g;) { var l = e.nodeName; if ("DIV" == l || $D[l] && (!c || !(At(e) && 1 == e.getElementsByTagName("BR").length))) { if (rb && h) { "DIV" == l && (h == e.lastChild && At(h)) && (lc(h, e), fq(h).select()); break } return } rb && (c && "P" == l && "DIV" != l) && (h = e); e = e.parentNode } if (A && !Eb(9)) {
                var n = m, d = d.Sd(), e = d.duplicate(); e.moveEnd("character", 1); if (e.text.length && (n = e.parentElement(), e = e.duplicate(), e.collapse(m), e = e.parentElement(),
                n = n != e && e != d.parentElement())) d.move("character", -1), d.select()
            } b.D.ib.Da().execCommand("FormatBlock", m, "<DIV>"); n && (d.move("character", 1), d.select())
        }, a.XD = function (b) { var b = bD(b).Da(), c = b.selection.createRange(), d = db(); c.pasteHTML('<span id="' + d + '"></span>'); b = b.getElementById(d); b.id = ""; return b }, a.WD = function (b) {
            b = iw(b.D); if (!b.isCollapsed()) {
                var c = j; if (rb) { var d = b.W(), e = b.ua(); d == b.ha() && (d.lastChild && "BR" == d.lastChild.tagName && e == d.childNodes.length - 1) && (c = m) } if (c) {
                    var g = b; if (g && !g.isCollapsed()) {
                        var h =
                        j, c = g.Eb(), d = new TD(g.W(), c), e = g.ua(), l; l = g; var n = l.W(); iD(n) && (n = n.childNodes[l.ua()] || n); var n = jD(n), q = l.ha(); iD(q) && (q = q.childNodes[l.Ia()] || q); q = jD(q); l = n == q; if (n = !l) a: { var q = g, n = q.ha(), q = q.Ia(), r = n; if (iD(r)) { var w = r.childNodes[q]; if (!w || 1 == w.nodeType && iD(w)) { n = m; break a } } for (w = jD(r) ; w != r;) { if (wD(r)) { n = j; break a } r = r.parentNode } n = q != Rs(n) } g.Yc(); (g = UD(d, c)) ? g = Tq(g, e) : (g = Tq(c, c.childNodes.length), h = m); g.select(); l && (l = jD(g.W()), At(l, j) && (h = "&nbsp;", rb && "LI" == l.tagName && (h = "<br>"), l.innerHTML = h,
                        zt(l.firstChild), h = m)); n && (g = jD(g.W()), l = wD(g), g && l && (ic(g, l.childNodes), L(l))); h && (g = Tq(UD(d, c), e), g.select())
                    }
                }
            } return gD(b, j)
        }; a.aE = function () { }, a.bE = new aE, a.cE = ["click", B ? "keypress" : "keydown"]; aE.prototype.e = function (b, c, d, e, g) { function h(b) { if ("click" == b.type && od(b)) c.call(e, b); else if (13 == b.keyCode || 3 == b.keyCode) b.type = "keypress", c.call(e, b) } h.Aj = c; h.lt = e; g ? g.e(b, cE, h) : N(b, cE, h) }; aE.prototype.Fa = function (b, c, d, e, g) { for (var h = 0; d = cE[h]; h++) { var l; l = zd(b, d, m) || []; for (var n, q = 0; n = l[q]; q++) if (n.Tf.Aj == c && n.Tf.lt == e) { g ? g.Fa(b, d, n.Tf) : yd(b, d, n.Tf); break } } }; a.eE = function (b) { M.call(this); this.rk = b || window; this.rs = N(this.rk, "resize", this.Xw, m, this); this.qc = Zb(this.rk); if (D && lb || rb && this.rk.self != this.rk.top) this.Yt = window.setInterval(v(this.fC, this), dE) }; y(eE, Hd); a.dE = 500; t = eE.prototype; t.rs = k; t.rk = k; t.qc = k; t.Yt = k; t.ql = function () { return this.qc ? this.qc.clone() : k }; t.z = function () { eE.n.z.call(this); this.rs && (Ad(this.rs), this.rs = k); this.Yt && (window.clearInterval(this.Yt), this.Yt = k); this.qc = this.rk = k }; t.Xw = function () { this.fC() };
        t.fC = function () { var b = Zb(this.rk); Qb(b, this.qc) || (this.qc = b, this.dispatchEvent("resize")) }; a.gE = function (b, c) { M.call(this); this.ca = Tb(b); this.P = new ne(this); this.NA = new eE(this.ca.Sa()); this.md = {}; this.ud = this.ca.w("DIV", { className: fE }); Q(this.ud, m); b.appendChild(this.ud); Tf(this.ud, "zIndex", c); this.Sm = this.ud; this.$K = this.ca.w("DIV", { className: "tr_bubble_closebox", innerHTML: "&nbsp;" }); this.Sm.appendChild(this.$K); uD(this.ud, this.P); this.di = new Sh(this.ud) }; y(gE, Hd); a.fE = "tr_bubble"; t = gE.prototype; t.Nb = me("goog.ui.editor.Bubble");
        t.z = function () { gE.n.z.call(this); L(this.ud); this.ud = k; this.P.H(); this.P = k; this.NA.H(); this.NA = k }; t.Z = p("Sm"); t.Eb = p("ud"); t.aO = function () { this.S() && this.ma() }; t.IN = function () { for (var b in this.md) L(this.md[b].element); this.md = {}; E.remove(this.ud, "tr_multi_bubble"); this.P.removeAll(); this.dispatchEvent("hide") }; t.S = function () { return this.di.S() }; a.hE = A ? 4 : 2, a.iE = new Of(hE, 0, hE, 0);
        gE.prototype.ma = function () { var b = k, c = j, d; for (d in this.md) var e = this.md[d], b = e.mA, c = c && e.OR; d = 496; b = eg(this.ud) != eg(b); c && (d = jE(this, b ? 7 : 5, 4, 9)); d & 496 && (d = jE(this, b ? 6 : 4, 5, 9)); d & 496 && (d = jE(this, b ? 7 : 5, 4, 5), d & 496 && this.Nb.nk("reposition(): positionAtAnchor() failed with " + d)) };
        a.jE = function (b, c, d, e) { var g = k, h; for (h in b.md) { var l = b.md[h].mA; if (!g || tc(l, g)) g = b.md[h].mA } return Jm(g, c, b.ud, d, k, iE, e) }, a.kE = function (b, c, d, e, g, h) { this.type = d; this.mA = g; this.OR = h; this.element = b.w("DIV", { className: "tr_bubble_panel", id: c }, b.w("DIV", { className: "tr_bubble_panel_title" }, e + ":"), b.w("DIV", { className: "tr_bubble_panel_content" })) }; kE.prototype.Z = function () { return this.element.lastChild }; a.lE = function () { Gv.call(this); this.jc = new ne(this) }; y(lE, Gv); a.mE = function (b, c) { return new gE(b, c) }, a.nE = {}; t = lE.prototype; t.Kj = k; t.Mx = m; t.jd = lf("AbstractBubblePlugin"); t.wr = function () { this.S() && this.ij(); return m };
        t.ij = function (b, c) {
            var d; if (b) d = b.target; else if (c) d = c; else { var e = iw(this.D); if (e) { var g = e.W(), h = e.ha(), l = e.ua(), n = e.Ia(); A && (e.isCollapsed() && g != h) && (e = Tq(g, l)); 1 == g.nodeType && (g == h && l == n - 1) && (g = g.childNodes[l], 1 == g.nodeType && (d = g)) } d = d || e && e.Eb() } var q; a: {
                if (d && (l = this.AM(d))) {
                    if (l != this.It || !this.Kj) {
                        oE(this); this.Vg && at(this.Vg); d = pE(this); var r = this.mw(); if (!F.some(d.md, function (b) { return b.type == r })) {
                            this.It = l; var g = this.mw(), n = this.HD(), h = v(this.rL, this), w = this.cT(), e = db(), l = new kE(d.ca, e,
                            g, n, l, !w); d.md[e] = l; n = 0; for (w = d.Sm.childNodes.length - 1; n < w; n++) { var C = d.Sm.childNodes[n]; if (d.md[C.id].type > g) { q = C; break } } kc(l.element, q || d.Sm.lastChild); h(l.Z()); uD(l.element, d.P); q = F.Va(d.md); 1 == q ? (d.P.e(d.NA, "resize", d.aO).e(d.di, "hide", d.IN), d.di.F(j), d.ma()) : 2 == q && E.add(d.ud, "tr_multi_bubble"); d.ma(); this.Kj = e; this.jc.e(d, "hide", this.eE); this.bi(); this.Mx && this.jc.e(d.Z(), "keydown", this.fQ); this.jc.e(d.Z(), "mouseover", function () { this.Vg && this.Vg.stop() }, this)
                        }
                    } else this.Vg && this.Vg.stop(); q =
                    m; break a
                } oE(this); q = m
            } return q
        }; t.disable = function (b) { if (b.Bj == Tv) { var c = nE[b.id]; c && (c.H(), delete nE[b.id]) } }; a.pE = function (b) { var c = b.tX || b.D.Ek.document.body; b.ca = Tb(c); var d = nE[b.D.id]; d || (d = mE.call(k, c, b.D.CK || 0), nE[b.D.id] = d); return d }; t.mw = s(""); t.HD = s(""); t.cT = mf;
        a.oE = function (b) { if (b.Kj && (!b.Vg || !b.Vg.ac())) b.Vg = new yj(function () { if (this.Kj) { var b = pE(this), d = this.Kj; L(b.md[d].element); delete b.md[d]; d = F.Va(b.md); 1 >= d && E.remove(b.ud, "tr_multi_bubble"); 0 == d ? b.di.F(m) : b.ma(); this.eE() } }, 250, b), b.Vg.start() }; t.bi = ha; t.eE = function () { this.Kj = this.It = k; this.jc.removeAll() }; t.Tw = function (b) { if (this.Mx && this.S() && 9 == b.keyCode && !b.shiftKey) { var c = pE(this).Z(); if (c = J("tr_bubble_link", c)) return c.focus(), b.preventDefault(), j } return m };
        t.fQ = function (b) { if (this.S() && 9 == b.keyCode) { var c = pE(this).Z(), c = Wb("tr_bubble_link", c); if (b.shiftKey ? c[0] == b.target : c.length && c[c.length - 1] == b.target) this.D.focus(), b.preventDefault() } }; t.S = function () { return !!this.Kj }; t.ma = function () { var b = pE(this); b && b.ma() };
        t.Jq = function (b, c, d, e, g) { c = this.ca.w("SPAN", { className: "tr_bubble_link" }, g ? this.ca.w("I", { className: g }, c) : c); this.Mx && c.setAttribute("tabindex", 0); c.setAttribute("role", "link"); e ? e.appendChild(c) : (e = this.ca.m(b)) && nc(c, e); c.id = b; uD(c, this.jc); d && (b = this.jc, bE.e(c, d, i, b.fa || b, b)); return c }; x("Go to link: "); x("Change"); x("Remove"); a.qE = function (b) { M.call(this); this.fd = b }; y(qE, Hd); qE.prototype.show = function () { this.Ye || (this.Ye = this.kv(), this.Ye.addEventListener(gi, this.LM, m, this)); this.Ye.F(j) }; qE.prototype.hide = function () { this.Ye && this.Ye.F(m) }; qE.prototype.pb = function () { return !!this.Ye && this.Ye.S() }; a.rE = function (b) { this.Yk = b; this.vi = new Xh("", j, this.Yk.fd); this.Vm = new ei(this.Yk.fd); this.Um = {}; this.rh("tr-dialog") }; rE.prototype.ab = function (b) { this.vi.ab(b); return this };
        a.sE = function (b, c) { var d = x("OK"); b.Vm.set("ok", c || d, j); b.Um.ok = v(b.Yk.FN, b.Yk) }, a.tE = function (b) { var c = li, d = x("取消"); b.Vm.set(c, d, m, j); b.Um[c] = v(b.Yk.Gw, b.Yk); return b }; rE.prototype.ke = function (b, c, d) { d = d || db(); this.Vm.set(d, b); this.Um[d] = c; return this }; rE.prototype.rh = function (b) { E.add($h(this.vi), b); return this }; rE.prototype.Ja = function (b) { this.vi.Z().appendChild(b); return this };
        a.uE = function (b) { b.Vm.Hb() && (sE(b), tE(b)); ii(b.vi, b.Vm); var c = b.Um; b.Um = k; b.vi.addEventListener(ji, function (b) { if (c[b.key]) return c[b.key](b) }); ci(b.vi, j); var d = b.vi; b.vi = k; return d }; t = qE.prototype; t.nw = function (b) { return this.Ye.uc.hd(b) }; t.FN = function (b) { return (b = this.cn(b)) ? this.dispatchEvent(b) : m }; t.Gw = function () { return this.dispatchEvent("cancel") }; t.z = function () { this.Ye && (this.hide(), this.Ye.H(), this.Ye = k); qE.n.z.call(this) }; t.LM = function () { this.dispatchEvent("afterhide") }; a.vE = function (b) { Gv.call(this); this.hL = b }; y(vE, Gv); t = vE.prototype; t.Fe = function (b) { return b == this.hL }; t.execCommand = function (b, c) { return this.af.apply(this, arguments) }; t.pw = p("ob"); t.af = function (b, c) { this.lH || wE(this); this.ob || (this.ob = this.jv(Tb(this.D.Ek), c)); var d = iw(this.D); this.vz = d && new nD(d); Ct(this.D.ib.Sa()); xd(this.ob, "afterhide", this.Bn, m, this); this.D.Ig = j; this.ob.show(); this.dispatchEvent("dialogOpened"); Kv(this.D); return j };
        t.Bn = function () { this.D.Ig = m; xE(this); this.lH || wE(this); this.dispatchEvent("dialogClosed"); Kv(this.D); this.D.Oq.selectionchange = za() }; a.xE = function (b) { b.vz && (b.vz.restore(), b.vz = k); b.D.focus() }; t.z = function () { wE(this); vE.n.z.call(this) }; t.lH = m; t.Bx = m; a.wE = function (b) { b.ob && !b.Bx && (b.Bx = j, b.ob.H(), b.ob = k, b.Bx = m) }; a.yE = function () { }; y(yE, $o); ia(yE); t = yE.prototype; t.M = s("goog-tab"); t.xc = function () { return Wc.kB }; t.w = function (b) { var c = yE.n.w.call(this, b); (b = b.Of()) && this.Pc(c, b); return c }; t.o = function (b, c) { var c = yE.n.o.call(this, b, c), d = this.Of(c); d && b.tt(d); if (b.aa & 8 && (d = b.getParent()) && qa(d.mm)) b.cc(8, m), d.mm(b); return c }; t.Of = function (b) { return b.title || "" }; t.Pc = function (b, c) { b && (b.title = c || "") }; a.zE = function (b, c, d) { ip.call(this, b, c || yE.T(), d); lp(this, 8, j); this.bk |= 9 }; y(zE, ip); zE.prototype.Of = p("vp"); zE.prototype.Pc = function (b) { this.N.Pc(this.m(), b); this.tt(b) }; zE.prototype.tt = ca("vp"); gp("goog-tab", function () { return new zE(k) }); a.AE = function () { }; y(AE, Gp); ia(AE); AE.prototype.M = s("goog-tab-bar"); AE.prototype.xc = function () { return Wc.pJ }; AE.prototype.Jz = function (b, c, d) { this.yF || (this.yq || BE(this), this.yF = F.um(this.yq)); var e = this.yF[c]; e ? (b.Xo(e == CE || e == DE ? Jp : Ip), b.zF = e) : AE.n.Jz.call(this, b, c, d) }; AE.prototype.df = function (b) { var c = AE.n.df.call(this, b); this.yq || BE(this); c.push(this.yq[b.zF]); return c }; a.BE = function (b) { var c = b.M(); b.yq = F.create(EE, c + "-top", FE, c + "-bottom", CE, c + "-start", DE, c + "-end") }; a.HE = function (b, c, d) { b = b || EE; this.Xo(b == CE || b == DE ? Jp : Ip); this.zF = b; It.call(this, this.xb, c || AE.T(), d); GE(this) }; y(HE, It); a.EE = "top", a.FE = "bottom", a.CE = "start", a.DE = "end"; t = HE.prototype; t.vK = j; t.pf = k; t.C = function () { HE.n.C.call(this); GE(this) }; t.z = function () { HE.n.z.call(this); this.pf = k }; t.removeChild = function (b, c) { IE(this, b); return HE.n.removeChild.call(this, b, c) }; t.Fz = function (b) { HE.n.Fz.call(this, b); this.vK && this.mm(Rh(this, b)) }; t.mm = function (b) { b ? b.lm(j) : this.pf && this.pf.lm(m) };
        a.IE = function (b, c) { if (c && c == b.pf) { for (var d = dt(b, c), e = d - 1; c = Rh(b, e) ; e--) if (c.S() && c.isEnabled()) { b.mm(c); return } for (d += 1; c = Rh(b, d) ; d++) if (c.S() && c.isEnabled()) { b.mm(c); return } b.mm(k) } }; t.SN = function (b) { this.pf && this.pf != b.target && this.pf.lm(m); this.pf = b.target }; t.TN = function (b) { b.target == this.pf && (this.pf = k) }; t.QN = function (b) { IE(this, b.target) }; t.RN = function (b) { IE(this, b.target) }; t.ze = function () { Lt(this) || this.pd(this.pf || Rh(this, 0)) };
        a.GE = function (b) { b.h().e(b, "select", b.SN).e(b, "unselect", b.TN).e(b, "disable", b.QN).e(b, "hide", b.RN) }; gp("goog-tab-bar", function () { return new HE }); a.JE = function () { Gv.call(this) }; y(JE, Gv); JE.prototype.xr = function (b) { if (B && this.D.Ig) b = m; else if (9 == b.keyCode && !b.metaKey && !b.ctrlKey) { var c = iw(this.D); Jc(c.Eb(), "LI") || O.some(c, function (b) { return "LI" == b.tagName }) ? (this.D.execCommand(b.shiftKey ? "+outdent" : "+indent"), b.preventDefault(), b = j) : b = m } else b = m; return b }; a.KE = function () { Gv.call(this) }; y(KE, JE); KE.prototype.jd = s("ListTabHandler"); a.LE = function (b) { Gv.call(this); this.IP = b }; y(LE, Gv); t = LE.prototype; t.jd = lf("LoremIpsum"); t.Xp = nf; t.Dp = m; t.queryCommandValue = function (b) { return "usinglorem" == b && this.Dp };
        t.execCommand = function (b, c) { if ("clearlorem" == b) { var d = !!c, e = this.D; if (this.Dp && !e.Ig) { var g = e.m(); g || (g = e.Mc); this.Dp = m; g.style.fontStyle = this.VP; e.Gd(j, k, j); d && e.Wd() && (D ? (Sb(e.m()).body.focus(), e.Mf()) : rb && nw(e)) } } else "updatelorem" == b && (d = this.D, !this.Dp && (!d.Ig && Vv != d.id) && ((e = d.m()) || (e = d.Mc), At(e) && (this.Dp = j, this.VP = e.style.fontStyle, e.style.fontStyle = "italic", d.Gd(j, this.IP, j)))) }; t.Fe = function (b) { return "clearlorem" == b || "updatelorem" == b || "usinglorem" == b }; a.ME = function (b) { this.KB = b }; y(ME, Hd); a.NE = function () { M.call(this); this.EP = 100; this.Hd = []; this.Rj = []; this.Ns = [] }; y(NE, Hd); t = NE.prototype; t.Nr = k; t.BA = function () { OE(this, this.Hd, this.Rj) }; t.iz = function () { OE(this, this.Rj, this.Hd) }; a.OE = function (b, c, d) { if (c.length) { var e = c.pop(); d.push(e); b.Ns.push({ type: c == b.Hd ? "before_undo" : "before_redo", ED: c == b.Hd ? e.BA : e.iz, state: e }); 1 == b.Ns.length && b.Ag(); (0 == c.length || 1 == d.length) && b.dispatchEvent("state_change") } };
        t.Ag = function () { if (!(this.Nr || 0 == this.Ns.length)) { var b = this.Ns.shift(); this.dispatchEvent({ type: b.type, state: b.state }) && (b.state.KB ? (this.Nr = N(b.state, "action_completed", this.gM, m, this), b.ED.call(b.state)) : (b.ED.call(b.state), this.Ag())) } }; t.gM = function () { Ad(this.Nr); this.Nr = k; this.Ag() }; a.PE = function (b) { Gv.call(this); b = b || new NE; this.BF && Ad(this.BF); this.be = b; this.BF = N(this.be, "state_change", this.RL, m, this); this.Yi = {}; this.hn = {}; this.LE = k; this.FK = v(this.wS, this) }; y(PE, Gv); PE.prototype.Nb = me("goog.editor.plugins.UndoRedo"); PE.prototype.Jn = k; a.QE = F.um({ bX: "+undo", sW: "+redo" }); t = PE.prototype; t.Fe = function (b) { return b in QE }; t.mI = function (b) { this.disable(b); this.D = k };
        t.enable = function (b) { if (!this.isEnabled(b)) { jw(b); var c = new ne(this); B || c.e(b, "beforechange", this.NM); c.e(b, Pv, this.UM); c.e(b, "blur", this.Fw); this.Yi[b.Hg] = c; RE(this, b) } }; t.disable = function (b) { jw(b); var c = this.Yi[b.Hg]; c && (c.H(), delete this.Yi[b.Hg]); this.hn[b.Hg] && delete this.hn[b.Hg] }; t.isEnabled = function (b) { return !!this.Yi[b.Hg] }; t.z = function () { PE.n.z.call(this); for (var b in this.Yi) this.Yi[b].H(), delete this.Yi[b]; this.D = k; this.be && (this.be.H(), delete this.be) }; t.jd = s("UndoRedo");
        t.execCommand = function (b) { "+undo" == b ? this.be.BA() : "+redo" == b && this.be.iz() }; t.queryCommandValue = function (b) { var c = k; "+undo" == b ? c = 0 < this.be.Hd.length : "+redo" == b && (c = 0 < this.be.Rj.length); return c }; t.RL = function () { this.D.dispatchEvent({ type: "cvc", iL: ["+redo", "+undo"] }) };
        t.wS = function (b, c, d) { var e = this.D; if (e) { Jv(e, j, j); try { e.Ch(); e.execCommand("clearlorem", j); e.m().innerHTML = c; d && d.select(); var g = this.D; e.focus(); g && g.Hg != b.rn && g.execCommand("updatelorem"); var h = this.hn[b.rn]; h.qi = c; h.kI = d } catch (l) { this.Nb.log(ce, "Error while restoring undo state", l) } finally { this.Jn = b, e.Ze(), Kv(e) } } };
        t.xr = function (b, c, d) { if (d) { var e; "z" == c ? e = b.shiftKey ? "+redo" : "+undo" : "y" == c && (e = "+redo"); if (e) return (b = "+undo" == e ? this.be.Hd[this.be.Hd.length - 1] : this.be.Rj[this.be.Rj.length - 1]) && b.rn ? this.D.execCommand(e) : this.execCommand(e), j } return m }; t.NM = function (b) { if (!this.Jn) { var b = b.target, c = b.Hg; this.LE != c && (this.LE = c, RE(this, b)) } }; t.UM = function (b) { this.Jn ? (b = this.Jn, this.Jn = k, b.dispatchEvent("action_completed")) : RE(this, b.target) }; t.Fw = function (b) { (b = b.target) && jw(b) };
        a.RE = function (b, c) {
            var d = c.Hg, e, g; c.queryCommandValue("usinglorem") ? (e = "", g = k) : (e = c.m().innerHTML, g = new SE(c), g = !g.isValid() ? k : g); var h = b.hn[d]; if (h) { if (h.qi == e) return; if ("" == e || "" == h.qi) { var l = c.Ys(8, "", {}); if (e == l && "" == h.qi || h.qi == l && "" == e) return } h.jz = e; h.ZR = g; l = b.be; if (0 == l.Hd.length || !h.equals(l.Hd[l.Hd.length - 1])) { l.Hd.push(h); l.Hd.length > l.EP && l.Hd.shift(); var n = l.Rj.length; l.Rj.length = 0; l.dispatchEvent({ type: "state_added", state: h }); (1 == l.Hd.length || n) && l.dispatchEvent("state_change") } } b.hn[d] =
            new TE(d, e, g, b.FK)
        }, a.TE = function (b, c, d, e) { this.KB = j; this.rn = b; this.jH = e; this.qi = c; this.kI = d }; y(TE, ME); TE.prototype.BA = function () { this.jH(this, this.qi, this.kI) }; TE.prototype.iz = function () { this.jH(this, this.jz, this.ZR) }; TE.prototype.equals = function (b) { return this.rn == b.rn && this.qi == b.qi && this.jz == b.jz };
        a.SE = function (b) {
            this.Qd = b; var c = b.ib.Sa(), b = (b = iw(b)) && b.Rf() && b.Sa() == c ? b : k; if (Xq) { if (c = b, this.cs = m, c) { var d = cq(c), e = dq(c); if (d && e) { var b = c.Sh() ? c.Ia() : c.ua(), d = new TD(d, this.Qd.m()), g = eq(c), e = new TD(e, this.Qd.m()); c.Sh() ? (this.Ca = e, this.cA = g, this.za = d, this.Mv = b) : (this.Ca = d, this.cA = b, this.za = e, this.Mv = g); this.cs = j } } } else Wq && (c = b, this.cs = m, c && (b = c.ye(0).Sd(), tc(this.Qd.m(), b.parentElement()) && (c = this.Qd.ib.Da().body.createTextRange(), c.moveToElementText(this.Qd.m()), e = b.duplicate(), e.collapse(j),
            e.setEndPoint("StartToStart", c), this.Ca = UE(e), b = b.duplicate(), b.setEndPoint("StartToStart", c), this.za = UE(b), this.cs = j)))
        }; SE.prototype.isValid = p("cs"); SE.prototype.toString = function () { return Xq ? "W3C:" + this.Ca.toString() + "\n" + this.cA + ":" + this.za.toString() + "\n" + this.Mv : "IE:" + this.Ca + "," + this.za }; SE.prototype.select = function () { var b = this.xe(this.Qd.m()); b && (Wq && this.Qd.m().focus(), Sq(b).select()) };
        SE.prototype.xe = function (b) { if (Xq) { var c = UD(this.Ca, b), b = UD(this.za, b); return !c || !b ? k : Dq(c, this.cA, b, this.Mv).Sd() } c = b.ownerDocument.body.createTextRange(); c.moveToElementText(b); c.collapse(j); c.moveEnd("character", this.za); c.moveStart("character", this.Ca); return c };
        a.UE = function (b) { var c = b.duplicate(), d = b.text, e = d.length; c.collapse(j); c.moveEnd("character", e); for (var g, h = 10; (g = c.compareEndPoints("EndToEnd", b)) && !(e -= g, c.moveEnd("character", -g), --h, 0 == h) ;); b = 0; for (c = d.indexOf("\n\r") ; -1 != c;)++b, c = d.indexOf("\n\r", c + 1); return e + b }; a.VE = function (b, c) { Fp.call(this, b || cz.T(), c) }; y(VE, Fp); gp("goog-toolbar-separator", function () { return new VE }); a.XE = function (b, c) { M.call(this); this.fa = new ne(this); this.Qd = b; this.sb = c; this.ez = []; Ph(this.sb, function (b) { b.gb && this.ez.push(WE(b.Td())) }, this); this.sb.Ne(m); this.fa.e(this.Qd, "cvc", this.pU).e(this.sb, "action", this.Ew) }; y(XE, Hd); a.WE = function (b) { return b }; t = XE.prototype; t.h = p("fa"); t.nr = p("Qd"); t.S = function () { return this.sb.S() }; t.F = function (b) { this.sb.F(b) }; t.isEnabled = function () { return this.sb.isEnabled() }; t.$a = function (b) { this.sb.$a(b) }; t.blur = function () { this.sb.Uc(k) };
        t.z = function () { XE.n.z.call(this); this.fa && (this.fa.H(), delete this.fa); this.sb && (this.sb.H(), delete this.sb); delete this.Qd; delete this.ez }; t.pU = function (b) { if (this.sb.isEnabled() && this.dispatchEvent("change")) { var c; try { c = this.Qd.queryCommandValue(b.iL || this.ez) } catch (d) { c = {} } var b = c, e; for (e in b) if (c = Nh(this.sb, e)) { var g = b[e]; c.ri ? c.ri(g) : c.$c(!!g) } } }; t.Ew = function (b) { var c = b.target.Td(); this.Qd.execCommand(c, b.target.X()) }; a.YE = function (b) { this.cM = b }; y(YE, hd); YE.prototype.type = "ok"; a.ZE = function (b) { hd.call(this, "change"); this.isValid = b }; y(ZE, hd); a.$E = function (b) { return !b ? "" : "//www.zhihu.com/equation?tex=" + encodeURIComponent(b) }; a.aF = function (b) { T.call(this, b) }; y(aF, T); aF.prototype.jj = ""; aF.prototype.F = function (b) { Q(this.m(), b) }; a.cF = function (b, c, d, e, g, h, l, n) { this.pi = c; this.yk = l || []; for (var c = n || bF.T(), n = [], d = -d, e = -e, q = 0; q < l.length; q++) n.push(K("DIV", { "class": c.M() + "-item", style: "width:" + g + "px;height:" + h + "px;background-position:" + d + "px " + e + "px;" })), d -= g; this.Xf = b; vz.call(this, n, c) }; y(cF, vz); t = cF.prototype; t.Nh = p("pi"); t.hl = function (b) { return 0 <= b && b < this.yk.length ? this.yk[b] : k }; t.Pf = function (b) { cF.n.Pf.call(this, b); this.Xf.dispatchEvent(new dF(eF, this)) };
        t.Oh = function (b) { cF.n.Oh.call(this, b); b.relatedTarget && !tc(this.m(), b.relatedTarget) && this.Xf.sv() }; t.kd = function (b) { cF.n.kd.call(this, b); b.relatedTarget && !tc(this.m(), b.relatedTarget) && this.Xf.tv.stop() }; a.dF = function (b, c, d) { hd.call(this, b, d); this.DR = c }, a.eF = "a"; dF.prototype.xw = p("DR"); a.bF = function () { }; y(bF, nz); ia(bF); bF.prototype.M = s("ee-palette"); a.fF = function (b) { cF.call(this, b, "a", 0, 150, 18, 18, "\\leftarrow \\rightarrow \\leftrightarrow \\Leftarrow \\Rightarrow \\Leftrightarrow \\uparrow \\downarrow \\updownarrow \\Uparrow \\Downarrow \\Updownarrow".split(" ")); zz(this, new Pb(12, 1)) }; y(fF, cF); a.gF = function (b) { cF.call(this, b, "c", 0, 70, 18, 18, "\\leq \\geq \\prec \\succ \\preceq \\succeq \\ll \\gg \\equiv \\sim \\simeq \\asymp \\approx \\ne \\subset \\supset \\subseteq \\supseteq \\in \\ni \\notin".split(" ")); zz(this, new Pb(7, 3)) }; y(gF, cF); a.hF = function (b) { cF.call(this, b, "g", 0, 30, 18, 18, "\\alpha \\beta \\gamma \\delta \\epsilon \\varepsilon \\zeta \\eta \\theta \\vartheta \\iota \\kappa \\lambda \\mu \\nu \\xi \\pi \\varpi \\rho \\varrho \\sigma \\varsigma \\tau \\upsilon \\phi \\varphi \\chi \\psi \\omega \\Gamma \\Delta \\Theta \\Lambda \\Xi \\Pi \\Sigma \\Upsilon \\Phi \\Psi \\Omega".split(" ")); zz(this, new Pb(7, 6)) }; y(hF, cF); a.iF = function (b) { cF.call(this, b, "m", 0, 90, 30, 56, "x_{a};x^{b};x_{a}^{b};\\bar{x};\\tilde{x};\\frac{a}{b};\\sqrt{x};\\sqrt[n]{x};\\bigcap_{a}^{b};\\bigcup_{a}^{b};\\prod_{a}^{b};\\coprod_{a}^{b};\\left( x \\right);\\left[ x \\right];\\left{ x \\right};\\left| x \\right|;\\int_{a}^{b};\\oint_{a}^{b};\\sum_{a}^{b}{x};\\lim_{a \\rightarrow b}{x}".split(";")); zz(this, new Pb(10, 2)) }; y(iF, cF); a.kF = function (b) { cF.call(this, b, "mn", 0, 0, 46, 18, ["g", "s", "c", "m", "a"], jF.T()); zz(this, new Pb(5, 1)) }; y(kF, cF); kF.prototype.F = function (b, c) { return kF.n.F.call(this, j, c) }; a.jF = function () { }; y(jF, bF); ia(jF); jF.prototype.M = s("ee-menu-palette"); a.lF = function (b) { cF.call(this, b, "s", 0, 50, 18, 18, "\\times \\div \\cdot \\pm \\mp \\ast \\star \\circ \\bullet \\oplus \\ominus \\oslash \\otimes \\odot \\dagger \\ddagger \\vee \\wedge \\cap \\cup \\aleph \\Re \\Im \\top \\bot \\infty \\partial \\forall \\exists \\neg \\angle \\triangle \\diamond".split(" ")); zz(this, new Pb(7, 5)) }; y(lF, cF); a.mF = function () { M.call(this); this.DG = {}; this.Dm = k; this.P = new ne(this); this.tv = new Jd(300); this.P.e(this.tv, Kd, this.TD) }; y(mF, Hd); t = mF.prototype; t.xw = function (b) { var c = this.DG, d = c[b]; if (!d) { switch (b) { case "mn": d = new kF(this); break; case "g": d = new hF(this); break; case "s": d = new lF(this); break; case "c": d = new gF(this); break; case "m": d = new iF(this); break; case "a": d = new fF(this); break; default: f(Error("Invalid palette type!")) } c[b] = d } return d };
        t.setActive = function (b) { var c = this.Dm; c && c.F(m); this.Dm = c = this.xw(b); c.F(j); return c }; t.sv = function () { this.tv.start() }; t.TD = function () { this.setActive("mn") }; t.z = function () { mF.n.z.call(this); this.DG = this.Dm = k }; a.nF = function (b, c, d) { T.call(this, d); this.jj = c; this.Xf = b.CR }; y(nF, aF); t = nF.prototype; t.kF = ""; t.Xu = 0;
        t.w = function () {
            var b = x("TeX 公式"), c = x("预览"), d = x("Learn more"), e = this.ca, d = e.w("DIV", { style: "display: none;" }, e.w("SPAN", { "class": "ee-section-title ee-section-title-floating" }, b), this.jj ? e.w("A", { id: "ee-section-learn-more", target: "_blank", href: this.jj }, d) : k, e.w("DIV", { style: "clear: both;" }), b = this.GO = e.w("DIV", { style: "position: relative" })); this.Xf.setActive("mn").Y(b); b.appendChild(e.w("DIV", { style: "clear:both" })); var g = this.jh = e.w("textarea", { "class": "ee-tex", dir: "ltr" }); b.appendChild(g); b.appendChild(e.w("DIV",
            { "class": "ee-section-title" }, c)); c = this.QR = e.w("DIV", { "class": "ee-preview-container" }); b.appendChild(c); this.g = d
        }; t.C = function () { this.VH = new dv(this.jh); N(this.VH, "input", this.kE, m, this); this.h().e(this.jh, "keydown", this.kE); this.h().e(this.Xf, eF, this.HN, m, this) }; t.F = function (b) { nF.n.F.call(this, b); b && Ld(this.nM, 0, this) }; t.nM = function () { this.jh.focus(); Zs(this.jh, this.jh.value.length) };
        a.oF = function (b) { var c = b.ll(); if (c != b.kF) { b.kF = c; var d = !(1024 < c.length); b.dispatchEvent(new ZE(d)); var b = b.QR, e = Tb(b); e.bt(b); c && (d ? c = e.w("IMG", { src: $E(c) }) : (c = x("Equation is too long"), c = e.w("DIV", { "class": "ee-warning" }, c)), e.appendChild(b, c)) } }; t.kE = function () { this.Xu++; Ld(v(this.UN, this, this.Xu), 500) }; t.UN = function (b) { b == this.Xu && oF(this) };
        t.HN = function (b) { var c = b.xw(), d = this.Xf, e = d.Dm, b = this.jh; if ("mn" == c.Nh()) { var g = c.Gb, g = -1 != g ? c.hl(g) : k; if (e != c && e.Nh() == g) { d.TD(); return } g && (c = this.Xf.setActive(g), c.m() || c.Y(this.GO), c = c.m(), $f(c, 0, -c.clientHeight)) } else { e = this.Xf.Dm; g = e.hl(e.Gb); if (!g) return; Ld(v(this.OO, this, g + " "), 0) } b.focus() }; t.OO = function (b) { var c = this.jh, d = vm(c), e = c.value, e = e.substring(0, d) + b + e.substring(d); c.value = e; Zs(c, d + b.length); oF(this) }; t.ll = function () { return this.jh.value }; t.Dz = function (b) { this.jh.value = b; oF(this) };
        t.z = function () { this.VH.H(); this.Xf = k; nF.n.z.call(this) }; a.pF = function (b, c, d) { T.call(this, d); this.wC = b; this.jj = c }; y(pF, T); t = pF.prototype; t.kh = k; t.w = function () { pF.n.w.call(this); this.Hq() }; t.Hq = function () { var b = this.m(); this.kh = new nF(this.wC, this.jj, this.ca); this.J(this.kh); this.kh.Y(b); this.kh.F(j) }; t.ea = function (b) { this.g = b; this.Hq() }; t.ll = function () { return this.kh.ll() }; t.Dz = function (b) { this.kh.Dz(b) }; t.tw = function () { var b = this.ll(), c = $E(b); return !c ? "" : '<img src="' + c + '" alt="' + Va(b) + '" class="ee_img tr_noresize" eeimg="1" style="vertical-align: middle">' };
        t.isValid = function () { return 1024 < this.ll().length }; t.F = function (b) { this.kh.F(b) }; t.z = function () { this.kh && this.kh.H(); this.wC = k; pF.n.z.call(this) }; a.qF = function (b, c, d, e) { qE.call(this, c); this.Xi = new pF(b, e); this.Xi.Y(); this.Xi.Dz(d); this.Xi.addEventListener("+equation", this.uo, m, this) }; y(qF, qE); qF.prototype.kv = function () { var b = new rE(this), c = x("公式编辑器"), d = x("插入公式"), e = x("保存"), d = this.Xi.ll() ? e : d; sE(tE(b.ab(c).Ja(this.Xi.m())), d); return uE(b) }; qF.prototype.cn = function () { if (this.Xi.isValid()) return k; var b = this.Xi.tw(); return new YE(b) }; qF.prototype.uo = function (b) { this.ZF || (this.ZF = this.nw("ok")); this.ZF.disabled = !b.isValid }; a.rF = function (b) { this.jj = b || ""; vE.call(this, "+equation") }; y(rF, vE); t = rF.prototype; t.Ea = me("goog.editor.plugins.EquationEditorPlugin"); t.jd = lf("EquationEditorPlugin"); t.jv = function (b, c) { var d = c || k, e; d ? (e = d.getAttribute("alt"), e || (e = d.getAttribute("src"), e = !e ? "" : decodeURIComponent(e.match(we)[6] || k).slice(4) || "")) : e = ""; this.CG = d; d = {}; d.CR = new mF; d = new qF(d, b, e, this.jj); d.addEventListener("ok", this.Fn, m, this); return d }; t.enable = function (b) { rF.n.enable.call(this, b) };
        t.disable = function (b) { rF.n.disable.call(this, b) }; t.Fn = function (b) { xE(this); this.D.Ch(); b = fc(bD(this).Ha, b.cM); if (this.CG) nc(b, this.CG); else { var c = iw(this.D); c.isCollapsed() || c.Yc(); b = c.insertNode(b, m) } Xs(b, m); this.D.Ze() }; a.sF = function () { lE.call(this) }; y(sF, lE); x("Equation:"); a.tF = x("Edit"), a.uF = x("Remove"); t = sF.prototype; t.jd = s("EquationBubble"); t.AM = function (b) { return b && "IMG" == b.nodeName && (b.getAttribute("eeimg") || E.has(b, "ee_img")) ? b : k }; t.rL = function (b) { this.Jq("ee_bubble_edit", tF, this.VL, b, "zg-icon zg-icon-pen"); this.Jq("ee_remove_remove", uF, this.hS, b, "zg-icon zg-icon-trash") }; t.mw = s("IMG"); t.HD = function () { return x("Equation") }; t.hS = function () { this.D.Ch(); L(this.It); oE(this); this.D.Ze() };
        t.VL = function () { var b = this.It; oE(this); this.D.execCommand("+equation", b) }; a.vF = function (b) { Gv.call(this); this.GA = "http://upload." + ch.Mo + ":" + location.port + "/upload"; F.extend(this.G = {}, this.defaults, b || {}) }; y(vF, Gv); t = vF.prototype; t.defaults = { PY: ha }; t.jd = lf("FastUpload");
        t.enable = function (b) {
            if (!this.isEnabled(b) && !(!window.URL && !window.webkitURL || !window.FileReader || !window.FormData || !document.addEventListener)) {
                $.fn.draghover = function () {
                    return this.each(function () {
                        var b = $(), c = $(this), d = j; c.on("dragenter", function (l) { l = l.originalEvent; 0 === b.size() && (d && z.contains(l.dataTransfer.types, "Files")) && c.trigger("draghoverstart", l); b = b.add(l.target) }); c.on("dragleave", function (l) { setTimeout(function () { b = b.not(l.target); 0 === b.size() && d && c.trigger("draghoverend", l) }, 1) });
                        c.on("dragstart", function () { d = m }); c.on("drop dragend", function () { b = $(); c.trigger("draghoverend"); d = j })
                    })
                }; this.SA = $(this.D.m()); var c = bD(this), d = $('<div class="editable-dropzone"><div class="row"><div class="cell"><div>拖拽至此处上传</div></div></div></div>'); c.xx(d[0], this.D.m()); c = this.MI = d; new ne(this); b.m().addEventListener("paste", v(this.Ww, this)); document.addEventListener("dragover", v(this.gN, this), m); c.on("dragover", v(this.fN, this)); c.get(0).addEventListener("drop", v(this.ur, this), m); $(window).draghover().on({
                    draghoverstart: v(this.VD,
                    this), draghoverend: v(this.hN, this)
                }); c.draghover().on({ draghoverstart: v(this.$M, this), draghoverend: v(this.VD, this) })
            }
        }; t.gN = function (b) { z.contains(b.dataTransfer.types, "Files") && (b.dataTransfer.dropEffect = "none", b.preventDefault()) }; t.fN = function (b) { b = b.originalEvent; b.dataTransfer.dropEffect = "copy"; b.preventDefault(); b.stopPropagation() }; t.VD = function (b) { b.preventDefault(); b.stopPropagation(); wF(this, 1) }; t.$M = function (b) { wF(this, 2); b.stopPropagation() };
        t.hN = function (b) { b.preventDefault(); wF(this, 0) }; a.wF = function (b, c) { var d = [{ display: "none" }, { display: "table", width: b.SA.width(), height: b.SA.height(), "background-color": "rgba(255, 255, 255, 0.5)" }]; d[2] = $.extend({}, d[1], { "background-color": "rgba(245, 245, 245, 0.5)" }); b.MI.css(d[c]) }; t.Ww = function (b) { var c = this; b.clipboardData && z.contains(b.clipboardData.types, "Files") && z.forEach(b.clipboardData.items, function (d) { -1 < d.type.indexOf("image") && (xF(c, d.getAsFile()), b.preventDefault()) }) };
        t.ur = function (b) { var c = this; c.D.execCommand("clearlorem"); var d = b.dataTransfer.files; document.createElement("img"); b.preventDefault(); var e = []; z.forEach(d, function (b) { -1 < b.type.indexOf("image") ? (xF(c, b), e.push(j)) : e.push(m) }); z.every(e, function (b) { return !b }) && U("文件类型不支持！"); wF(c, 0) };
        a.xF = function (b, c) {
            var d = new FormData; d.append("via", "xhr2"); d.append("upload_file", c); var e; e = $.ajaxSettings.xhr(); e.withCredentials = j; var g = $.ajax({ url: b.GA, data: d, processData: m, contentType: m, xhr: function () { return e }, type: "POST" }).done(function (b) { "string" === $.type(b) && (b = JSON.parse(b)); if (1 === b.code) U(b.msg); else { var c = new Image; c.src = b.msg[0]; c.setAttribute("originImgSrc", c.src.replace("_m.jpg", "_r.jpg")); c.setAttribute("data-rawWidth", b.msg[1]); c.setAttribute("data-rawHeight", b.msg[2]); g.XA.after(c) } }).fail(function () { U("上传失败！>_<") }).always(function () { g.XA.remove() }),
            d = g, h; h = bD(b); var l = h.w("IMG", { "class": "", style: "display:block", src: "http://static.zhihu.com/static/img/spinner2.gif" }), n = iw(b.D); !n || !sD(n) || !tc(b.D.m(), n.Eb()) ? At(b.D.field) ? mc(b.D.m(), l, 0) : b.D.m().appendChild(l) : n.ag(l); A || (Xs(l, m), h.Sa().focus()); Jv(b.D); h = $(l); d.XA = h
        }; a.yF = {}, a.EF = function (b, c, d) {
            function e(b) { oc(b) } function g(c, d) { for (; c !== b;) { if (d(c)) return c; c = c.parentNode } return k } function h(b) { return b.tagName && b.tagName === c } b || f("Missing Editable Container"); c || (c = "blockquote"); var c = c.toUpperCase(), l = Rq(); if (l && zF(b, cq(l)) && zF(b, dq(l))) {
                var n = dD(l.W(), l.ua(), l.ha(), l.Ia()), q; if (l.isCollapsed()) q = []; else {
                    var r = l.yc(), w = l.W(), C = l.ha(); q = r.childNodes; var I = function (b) { return w !== r && !zF(b, w) }, G = function (b) { return !(b.previousSibling && zF(b.previousSibling, C)) };
                    q = O.toArray(1 === q.length ? q : O.lA(O.UL(q, I), G))
                } var I = l.Eb(), G = g(I, h), R = z.reduce(q, function (b, d) { 1 === d.nodeType && (h(d) ? b.push(d) : b.push.apply(b, z.toArray(d.getElementsByTagName(c)))); return b }, []), X; if (G) { if (d) return AF.ku; oc(G) } else if (R.length) { if (d) return AF.ku; z.forEach(R, e) } else {
                    if (d) return AF.eB; if (d = g(I, function (b) { return z.contains(BF, b.tagName.toLowerCase()) })) X = document.createElement(c), d.parentNode.insertBefore(X, d), X.appendChild(d); else if (l.W() !== l.ha()) X = document.createElement(c), q[0].parentNode.insertBefore(X,
                    q[0]), z.forEach(q, function (b) { X.appendChild(b) }); else {
                        n = c; CF.uJ ? document.execCommand("formatBlock", m, n) : (d = Rq(), l = d.yc(), ra(l) && 1 == l.nodeType && At(l) ? (n = document.createElement(n), l === b ? l.appendChild(n) : nc(n, l), (D || B) && n.appendChild(document.createElement("br")), zt(n)) : (d = d.ha(), d = Ic(d, function (b) { return vD(b.parentNode) || iD(b.parentNode) }, j), l = O.lA(new gt(d, j, j), qf(DF)), d = O.lA(new gt(d, m, m), qf(DF)), l = O.toArray(l).reverse().concat(O.toArray(d)), l.length && (n = document.createElement(n), d = z.Je(l), (q = d.nextSibling) &&
                        (q && "BR" === q.tagName) && L(q), lc(n, d), ic(n, l), (D || B) && n.appendChild(document.createElement("br")), Xs(n.lastChild)))); return
                    }
                } n && (l = function (c, d) { return c && zF(b, c) && Rs(c) >= d }, l(n.W(), n.ua()) && l(n.ha(), n.Ia()) && n.select())
            } else if (d) return AF.eB
        }, a.DF = function (b) { return b && "BR" === b.tagName || vD(b) || iD(b) }, a.zF = function (b, c) { return 3 === b.nodeType ? b === c : b.contains(3 === c.nodeType ? c.parentNode : c) }, a.BF = ["ul", "ol", "dl", "table"], a.AF = { ku: 1, eB: 0 }, a.CF = yF; CF.uJ = !A; CF.toggle = EF;
        CF.Ud = function (b, c) { return EF(b, c, j) }; CF.oJ = AF; a.FF = function () { Gv.call(this) }; y(FF, Gv); t = FF.prototype; t.jd = lf("Blockquote"); t.Fe = function (b) { return "+blockquote" === b }; t.af = function (b) { this.Fe(b) && yF.toggle(this.D.m()) }; t.queryCommandValue = function () { return yF.oJ.ku === yF.Ud(this.D.m()) }; t.Tw = function (b) { if (13 === b.keyCode) return this.Nw(b) }; t.Nz = function (b, c) { return GF(b, c).Nz };
        a.GF = function (b, c) { function d(b, c) { return { Nz: b, WF: c } } D && (b.normalize(), c = Rq()); var e, g = c; e = g.ha(); var h = g.Ia(), g = g.yc(), l = g.childNodes.length; 3 !== e.nodeType && l && (e = g.childNodes[h === l ? l - 1 : h]); if (!e) return d(m, k); if (At(b)) return d(j, b); for (h = e; h !== b;) { if (wD(h)) return d(m, k); h = h.parentNode } return e && "BR" === e.tagName && e.previousSibling && "BR" === e.previousSibling.tagName ? d(j, e) : (e = c.Eb()) && 1 === e.nodeType && (!e.childNodes.length || At(e)) ? d(j, e) : d(m, k) };
        t.Nw = function (b) { var c = iw(this.D); if (c.isCollapsed()) { var d; a: { d = c.ha(); for (var e = this.D.field; d !== e;) { if ("BLOCKQUOTE" === d.tagName) break a; d = d.parentNode } d = i } if (d && (c = GF(d, c), c.Nz)) { b.preventDefault(); b = document.createElement("div"); lc(b, d); if (D || B) (d = (d = d.nextSibling) && "BR" === d.tagName && d) || (d = document.createElement("br")), b.appendChild(d); Tq(b, 0).select(); c.WF && L(c.WF) } } }; aB["+blockquote"] = { gb: j, R: "引用内容", xa: "+blockquote", Ma: "tr-icon tr-blockquote", factory: bA }; a.HF = function (b, c) { this.hb = b; this.KA = !c };
        HF.prototype.fi = function (b, c, d) {
            var e, g = []; if ("" != b) { e = $a(b); var h = RegExp("(^|\\W+)" + e, "i"); O.some(this.hb, function (b) { String(b).match(h) && g.push(b); return g.length >= c }) } e = g; if (0 == e.length && this.KA) {
                var l = []; O.forEach(this.hb, function (c, d) {
                    var e = b.toLowerCase(), g = String(c).toLowerCase(), h = 0; if (-1 != g.indexOf(e)) h = parseInt((g.indexOf(e) / 4).toString(), 10); else for (var n = e.split(""), R = -1, X = 10, ja = 0, Na; Na = n[ja]; ja++) Na = g.indexOf(Na), Na > R ? (R = Na - R - 1, R > X - 5 && (R = X - 5), h += R, R = Na) : (h += X, X += 5); h < 6 * e.length && l.push({
                        yT: c,
                        pH: h, index: d
                    })
                }); l.sort(function (b, c) { var d = b.pH - c.pH; return 0 != d ? d : b.index - c.index }); e = []; for (var n = 0; n < c && n < l.length; n++) e.push(l[n].yT)
            } d(b, e)
        }; a.IF = function (b) { T.call(this); F.extend(this.G = {}, this.defaults, b || {}); this.de = k }; y(IF, T);
        a.JF = [["ABAP", ["abap"]], ["ActionScript", ["as", "actionscript"]], ["Ada", ["ada", "ada95ada2005"]], ["ANTLR", ["antlr"]], ["ApacheConf", ["apacheconf", "aconf", "apache"]], ["AppleScript", ["applescript"]], ["AspectJ", ["aspectj"]], ["Asymptote", ["asy", "asymptote"]], ["AutoHotkey", ["ahk"]], ["Awk", ["awk", "gawk", "mawk", "nawk"]], ["BBCode", ["bbcode"]], ["Base Makefile", ["basemake"]], ["Bash", ["bash", "sh", "ksh"]], ["Batchfile", ["bat"]], ["Befunge", ["befunge"]], ["BlitzMax", ["blitzmax", "bmax"]], ["Boo", ["boo"]], ["Brainfuck",
        ["brainfuck", "bf"]], ["Bro", ["bro"]], ["BUGS", ["bugs", "winbugs", "openbugs"]], ["C", ["c"]], ["CMake", ["cmake"]], ["c-objdump", ["c-objdump"]], ["aspx-cs", ["aspx-cs"]], ["C#", ["csharp", "c#"]], ["Ceylon", ["ceylon"]], ["CFEngine3", ["cfengine3", "cf3"]], ["Cheetah", ["cheetah", "spitfire"]], ["Clojure", ["clojure", "clj"]], ["CoffeeScript", ["coffee-script", "coffeescript"]], ["Coldfusion HTML", ["cfm"]], ["cfstatement", ["cfs"]], ["Common Lisp", ["common-lisp", "cl"]], ["Coq", ["coq"]], ["C++", ["cpp", "c++"]], ["cpp-objdump", ["cpp-objdump",
        "c++-objdumb", "cxx-objdump"]], ["Croc", ["croc"]], ["CSS", ["css"]], ["CUDA", ["cuda", "cu"]], ["Cython", ["cython", "pyx"]], ["D", ["d"]], ["d-objdump", ["d-objdump"]], ["Darcs Patch", ["dpatch"]], ["Dart", ["dart"]], ["Delphi", ["delphi", "pas", "pascal", "objectpascal"]], ["dg", ["dg"]], ["Diff", ["diff", "udiff"]], ["Django/Jinja", ["django", "jinja"]], ["DTD", ["dtd"]], ["Duel", "duel;Duel Engine;Duel View;JBST;jbst;JsonML+BST".split(";")], ["Dylan", ["dylan"]], ["ECL", ["ecl"]], ["eC", ["ec"]], ["Erlang", ["erlang"]], ["Elixir", ["elixir",
        "ex", "exs"]], ["ERB", ["erb"]], ["Evoque", ["evoque"]], ["FSharp", ["fsharp"]], ["Factor", ["factor"]], ["Fancy", ["fancy", "fy"]], ["Fantom", ["fan"]], ["Felix", ["felix", "flx"]], ["Fortran", ["fortran"]], ["GLSL", ["glsl"]], ["GAS", ["gas"]], ["Genshi", ["genshi", "kid", "xml+genshi", "xml+kid"]], ["Gettext Catalog", ["pot", "po"]], ["Gherkin", ["Cucumber", "cucumber", "Gherkin", "gherkin"]], ["Gnuplot", ["gnuplot"]], ["Go", ["go"]], ["GoodData-CL", ["gooddata-cl"]], ["Gosu", ["gosu"]], ["Gosu Template", ["gst"]], ["Groff", ["groff", "nroff",
        "man"]], ["Groovy", ["groovy"]], ["Haml", ["haml", "HAML"]], ["Haskell", ["haskell", "hs"]], ["haXe", ["hx", "haXe"]], ["HTML", ["html"]], ["HTTP", ["http"]], ["Hxml", ["haxeml", "hxml"]], ["Hybris", ["hybris", "hy"]], ["INI", ["ini", "cfg"]], ["Io", ["io"]], ["Ioke", ["ioke", "ik"]], ["IRC logs", ["irc"]], ["Jade", ["jade", "JADE"]], ["JavaScript", ["js", "javascript"]], ["JSON", ["json"]], ["Java", ["java"]], ["Java Server Page", ["jsp"]], ["Julia console", ["jlcon"]], ["Julia", ["julia", "jl"]], ["Kconfig", ["kconfig", "menuconfig", "linux-config",
        "kernel-config"]], ["Koka", ["koka"]], ["Kotlin", ["kotlin"]], ["Lasso", ["lasso", "lassoscript"]], ["Lighttpd configuration file", ["lighty", "lighttpd"]], ["Literate Haskell", ["lhs", "literate-haskell"]], ["LiveScript", ["live-script", "livescript"]], ["LLVM", ["llvm"]], ["Logtalk", ["logtalk"]], ["Lua", ["lua"]], ["MOOCode", ["moocode"]], ["Makefile", ["make", "makefile", "mf", "bsdmake"]], ["Mako", ["mako"]], ["MAQL", ["maql"]], ["Mason", ["mason"]], ["Matlab", ["matlab"]], ["Matlab session", ["matlabsession"]], ["MiniD", ["minid"]],
        ["Modelica", ["modelica"]], ["Modula-2", ["modula2", "m2"]], ["MoinMoin/Trac Wiki markup", ["trac-wiki", "moin"]], ["Monkey", ["monkey"]], ["MoonScript", ["moon", "moonscript"]], ["Mscgen", ["mscgen", "msc"]], ["MuPAD", ["mupad"]], ["MXML", ["mxml"]], ["MySQL", ["mysql"]], ["Myghty", ["myghty"]], ["NASM", ["nasm"]], ["Nemerle", ["nemerle"]], ["NewLisp", ["newlisp"]], ["Newspeak", ["newspeak"]], ["Nginx configuration file", ["nginx"]], ["Nimrod", ["nimrod", "nim"]], ["NumPy", ["numpy"]], ["objdump", ["objdump"]], ["Objective-C", ["objective-c",
        "objectivec", "obj-c", "objc"]], ["Objective-J", ["objective-j", "objectivej", "obj-j", "objj"]], ["OCaml", ["ocaml"]], ["Octave", ["octave"]], ["Ooc", ["ooc"]], ["Opa", ["opa"]], ["OpenEdge ABL", ["openedge", "abl", "progress"]], ["Perl", ["perl", "pl"]], ["PHP", ["php", "php3", "php4", "php5"]], ["PL/pgSQL", ["plpgsql"]], ["PostScript", ["postscript"]], ["PostgreSQL console (psql)", ["psql", "postgresql-console", "postgres-console"]], ["PostgreSQL SQL dialect", ["postgresql", "postgres"]], ["POVRay", ["pov"]], ["PowerShell", ["powershell",
        "posh", "ps1"]], ["Prolog", ["prolog"]], ["Properties", ["properties"]], ["Protocol Buffer", ["protobuf"]], ["Python", ["python", "py", "sage"]], ["Python Traceback", ["pytb"]], ["RConsole", ["rconsole", "rout"]], ["Racket", ["racket", "rkt"]], ["Embedded Ragel", ["ragel-em"]], ["Raw token data", ["raw"]], ["Rd", ["rd"]], ["REBOL", ["rebol"]], ["Redcode", ["redcode"]], ["RHTML", ["rhtml", "html+erb", "html+ruby"]], ["RobotFramework", ["RobotFramework", "robotframework"]], ["reStructuredText", ["rst", "rest", "restructuredtext"]], ["Ruby",
        ["rb", "ruby", "duby"]], ["Rust", ["rust"]], ["S", ["splus", "s", "r"]], ["Standard ML", ["sml"]], ["Sass", ["sass", "SASS"]], ["Scala", ["scala"]], ["Scaml", ["scaml", "SCAML"]], ["Scheme", ["scheme", "scm"]], ["Scilab", ["scilab"]], ["SCSS", ["scss"]], ["Smali", ["smali"]], ["Smalltalk", ["smalltalk", "squeak"]], ["Smarty", ["smarty"]], ["Snobol", ["snobol"]], ["SourcePawn", ["sp"]], ["Debian Sourcelist", ["sourceslist", "sources.list"]], ["SQL", ["sql"]], ["sqlite3con", ["sqlite3"]], ["SquidConf", ["squidconf", "squid.conf", "squid"]], ["Scalate Server Page",
        ["ssp"]], ["Stan", ["stan"]], ["systemverilog", ["sv"]], ["Tcl", ["tcl"]], ["Tcsh", ["tcsh", "csh"]], ["Tea", ["tea"]], ["TeX", ["tex", "latex"]], ["Text", ["text"]], ["Treetop", ["treetop"]], ["UrbiScript", ["urbiscript"]], ["VGL", ["vgl"]], ["Vala", ["vala", "vapi"]], ["aspx-vb", ["aspx-vb"]], ["VB.net", ["vb.net", "vbnet"]], ["Velocity", ["velocity"]], ["verilog", ["v"]], ["vhdl", ["vhdl"]], ["VimL", ["vim"]], ["XQuery", ["xquery", "xqy", "xq", "xql", "xqm"]], ["XML", ["xml"]], ["XSLT", ["xslt"]], ["Xtend", ["xtend"]], ["YAML", ["yaml"]]], a.KF =
        function (b) { return { label: b[0], value: b[1][0], toString: lf(b[0]) } }, a.LF = z.map(JF, KF); t = IF.prototype; t.defaults = { NS: "lang-select", Cq: "collapsed", qP: "lang-list", wR: "lang-option", zk: "active", jC: "checked" }; t.z = function () { IF.n.z.call(this); this.h().H(); this.$.H(); L(this.g); this.ir = this.Lt = this.g = k }; t.w = function () { var b = this.G; this.g = K("div", { innerHTML: this.template, className: [b.NS, b.Cq].join(" ") }) }; t.template = '<div class="title-button">选择语言</div><i class="zg-icon zg-icon-double-arrow"></i><div class="input-wrapper"><input class="filter-input zg-form-text-input" placeholder="搜索语言"></div>';
        t.C = function () {
            IF.n.C.call(this); this.Lt = J("title-button", this.g); this.ir = J("filter-input", this.g); tg(this.Lt, j); var b = this.ir, c = this.g, d = this.G, e = this.h(), g = this, h = g.G, l = {}, n = new HF(LF, m), c = new Km(c, l), q = new xm(k, k, m), r = n.fi; n.fi = function (b, c, d) { La(b) ? r.apply(this, arguments) : d(b, LF) }; l.Zc = function (b, c, d) { b = b.data; b.value === g.de && (E.add(d, h.jC), d.appendChild(K("i", "icon " + h.jC))); d.appendChild(document.createTextNode(b.toString())) }; var w = new nm(n, c, q); q.$ = w; q.Fk(b); w.Vh = 20; e.e(w, "suggestionsupdate",
            function () { w.Be(w.Ic + 0) }).e(w, "update", function (b) { this.Fy(b.Oo) }).e(w, "dismiss", function () { this.rf(j) }); b = w.N; b.className = d.qP; b.gi = d.wR; b.qu = d.zk; this.$ = w; this.h().e(this.g, "click", this.sr).e(this.Lt, "click", this.VN)
        }; t.X = p("de"); t.Ba = function (b) { var c = b && z.find(LF, function (c) { return c.value === b }); c && (this.Zj(c.label), this.dispatchEvent({ type: "change", vR: c })); this.de = b };
        t.sr = function (b) { var c = this.$, d = c.N.m(); d && (document.activeElement !== this.ir && !d.contains(b.target)) && (b.preventDefault(), b.stopPropagation(), pm(c)) }; t.VN = function () { this.isCollapsed() && this.rf(m) }; t.isCollapsed = function () { return E.has(this.g, this.G.Cq) }; t.rf = function (b) { if (this.isCollapsed() !== b) { var c = this.ir, d = this.G; b ? E.add(this.g, d.Cq) : (E.remove(this.g, d.Cq), b = this.$, d = b.N, b.bm(LF), d.m().scrollTop = 0, d.show(), c.value = "", c.focus()) } }; t.Zj = function (b) { var c = this.Lt; c.title = b; yc(c, b) };
        t.Fy = function (b) { this.Ba(b.value); this.$.Hc() }; a.MF = function (b) { Gv.call(this); F.extend(this.G = {}, this.defaults, b || {}); this.Tv = this.sb = k }; y(MF, Gv);
        a.NF = D || rb || B, a.OF = function (b) { return "P" === b.tagName }, a.PF = function (b) { return 3 === b.nodeType }, a.QF = function (b) { return b && "PRE" === b.tagName }, a.RF = function (b) {
            function c(b) { return z.contains(g, b) } function d() { var b = document.createTextNode("\n"); g.push(b); return b } var e = document.createElement("div"); e.innerHTML = b; var g = [], h = qf(c), b = Ac(e, vD); (0, z.forEach)(b, function (b) {
                b.lastChild && "BR" === b.lastChild.tagName && b.removeChild(b.lastChild); b.firstChild || b.appendChild(document.createTextNode("")); b.insertBefore(d(),
                b.firstChild); b.appendChild(d())
            }); b = z.toArray(e.getElementsByTagName("br")); (0, z.forEach)(b, function (b) { b !== b.parentNode.lastChild && nc(document.createTextNode("\n"), b) }); e = Ac(e, PF); e = pf(function (b) { return z.filter(b, function (d, e) { var g = b[e - 1]; return !g || !(c(g) && c(d)) }) }, function (b) { var c = z.$v(b, h); return -1 !== c ? b.slice(0, c + 1) : b }, function (b) { var c = z.Zv(b, h); return -1 !== c ? b.slice(c) : b })(e); return (0, z.map)(e, function (b) { return b.nodeValue }).join("").replace(/\xa0/g, " ")
        }; t = MF.prototype; t.jd = lf("CodePlugin");
        t.Fe = function (b) { return "+code" === b }; t.af = function (b) { this.Fe(b) && this.trigger() }; t.queryCommandValue = function () { var b = "1" === SF(this).state, c = this.D.bj("EnterHandler"); c && (b ? c.disable(this.D) : c.enable(this.D)); this.sb && this.Tv && Ph(this.sb, function (c) { c instanceof hz && c.$a(!b || z.contains(this.Tv, c.Td())) }, this); return b }; t.defaults = { EL: "" }; t.US = function (b) { this.sb = b; this.Tv = ["toggleFullScreen"].concat("+code") }; t.z = function () { MF.n.z.call(this); this.sb = k };
        a.TF = function (b, c, d) { for (b = b.D.field; c !== b;) { if (d(c)) return c; c = c.parentNode } }, a.SF = function (b) { var c, d = Rq(); d && b.D.field.contains(d.Eb()) ? (c = d.W(), b = (c = TF(b, c, QF)) ? "1" : "2") : b = "0"; return { state: b, Go: d, code: c } };
        t.trigger = function () { var b = SF(this), c = b.Go, d = b.code; switch (b.state) { case "1": var e = !La(Hc(d)), b = wD(d); e ? (d.parentNode.removeChild(d), b && Xs(b, j)) : (c = c.W() && c.ha() ? new eD(c) : k, e = Oa(d.innerHTML), it(O.filter(new gt(d, m, j), ht)) && (e = "<br>" + e), b && "BR" !== b.tagName && (e += "<br>"), b = gc(e), d.parentNode.replaceChild(b, d), c.restore()); break; case "2": this.Vr(c, La(c.Lc()) ? RF(c.Vd()) : NF ? "\n" : "") } };
        t.Ki = function (b, c) { var d = document.createElement(b); d.id = Jh(Ih.T()); return c(d, function () { d = H(d.id); d.removeAttribute("id"); return d }) };
        t.pg = function () {
            var b = this.D, c = this.D.field, d, e = new qo(QF, m, k, c), g = K("div", { style: "display:none" }); Ys(e, new Of(4, 0, 0, 0)); e.Bl = new Of(4, 0, 0, 0) || k; e.yt = 150; e.Gr = 100; e.Xg(g); e.className = "hc-lang-select"; N(e, "beforeshow", function (b) { d = b.target.anchor; e.ad(new Xn(d, 1)); if (d.lang) { var b = h, c, g = d.lang; (c = (c = z.find(JF, function (b) { return b[0] === g || z.contains(b[1], g) })) && KF(c)) && b.Ba(c.value); h.rf(j) } else h.Zj("选择语言") }); N(e, "beforehide", function (b) { d = k; h.Ba(k); if ((b = b.target) && c.contains(b) && QF(b)) return m });
            var h = new IF; h.Y(g); N(h, "change", function (b) { d && (d.lang = b.vR.value, e.F(m)) }); this.Wp = { sw: lf(e), eY: lf(h), H: function () { e.H(); h.H() } }; Sc(b, this.Wp); N(b, "delayedchange", this.rS, m, this); N(b.field, "paste", this.Ww, m, this)
        }; t.rS = function () { var b = this.Wp && this.Wp.sw(); b && (b.S() && b.anchor) && b.ma() };
        t.Ww = function (b) {
            var c = SF(this), d = c.Go, e = c.code; if ("1" === c.state) if (c = b.Yb.clipboardData) c.types && z.contains(c.types, "text/plain") && (b.preventDefault(), c = c.getData("text/plain"), b = document.createTextNode(c), d.ag(b), Xs(b)); else if (window.clipboardData) { if (c = window.clipboardData.getData("Text")) { b.preventDefault(); var g = c; this.Ki("i", function (b, c) { d.ag(b); b = c(); g = Ja(g); nc(document.createTextNode(g), b) }) } } else {
                var h = d.ua(), b = d.Lc().length, l = (e.firstChild ? Rs(e.firstChild) : 0) - h - b; setTimeout(function () {
                    var b =
                    RF(e.innerHTML); yc(e, b); b = (e.firstChild ? Rs(e.firstChild) : 0) - l; e.firstChild && Tq(e.firstChild, Math.max(h, b)).select()
                })
            }
        };
        t.Tw = function (b) { if (13 === b.keyCode) return this.Nw(b); if (40 === b.keyCode) { var c = SF(this), d = c.Go, b = c.code; if ("1" === c.state) { for (var e = c = d.ha(), g = []; e && e !== b;) g.push([e.parentNode.childNodes.length, z.indexOf(e.parentNode.childNodes, e)]), e = e.parentNode; g = !g.length || z.every(g, function (b) { return b[0] === b[1] + 1 }); e = PF(c); if (g && !(g = !e)) e && (c = c.nodeValue, d = d.Ia(), e = d === c.length || NF && d === c.length - 1 && "\n" === c.slice(-1)), g = e; g && (wD(b) || lc(document.createElement("br"), b)) } } };
        t.Nw = function (b) { var c = SF(this), d = c.Go; if ("1" === c.state) return b.preventDefault(), A ? this.Ki("i", function (b, c) { d.ag(b); setTimeout(function () { var d = document.createTextNode("\r"); b = c(); nc(d, b); Xs(d) }) }) : document.queryCommandSupported("insertLineBreak") ? document.execCommand("insertLineBreak") : (b = document.createTextNode("\n"), d.insertNode(b), Xs(b)), this.D.Ze(), j };
        t.Vr = function (b, c) {
            var d = this.G, e; b.Yc(); var g; var h = gD(b, j), l = h.da, n, q = this.D.field; g = TF(this, l, yD(vD, qf(OF))) || q; var r = function (b) { return b.parentNode.insertBefore(document.createTextNode(""), b) }; if (PF(l)) { var w = l.parentNode; !l.nodeValue && w !== q && At(w) ? (n = r(w), l = r(n), w.parentNode.removeChild(w)) : n = A && h.offset === l.length ? lc(document.createTextNode(""), l) : l.splitText(h.offset) } else "BR" === l.tagName && (n = l, l = r(l)); if (n) {
                for (var C, h = l, l = n; h != g && (C = h.parentNode) ;) {
                    n = h; h = l; for (l = C.cloneNode(m) ; n.nextSibling;) l.appendChild(n.nextSibling);
                    h && l.insertBefore(h, l.firstChild); h = C
                } C = l; n = C.firstChild; ic(g, C.childNodes); g = n
            } else g = k; g ? (e = document.createElement("PRE"), g.parentNode.insertBefore(e, g)) : this.Ki("PRE", function (c, d) { b.insertNode(c); e = d() }); !c && A && (c = " "); e.lang = d.EL; yc(e, c); At(e) ? zt(e.firstChild) : Xs(e.lastChild); d = e; wD(d) || lc(document.createElement("br"), d)
        }; aB["+code"] = { gb: j, R: "插入代码", xa: "+code", Ma: "tr-icon tr-code", factory: bA }; a.UF = function () { Gv.call(this); this.tR = k }; y(UF, Gv); a.VF = /^(DIV|TR|LI|BLOCKQUOTE|H\d|PRE|XMP)/, a.WF = function (b) { b.push("<br>") }; t = UF.prototype; t.jd = s("RemoveFormatting"); t.Fe = function (b) { return "+removeFormat" == b }; t.af = function (b) { "+removeFormat" == b && !iw(this.D).isCollapsed() && (b = this.tR || v(this.aH, this), XF(this, b), bD(this).Da().execCommand("RemoveFormat", m, i), ir && XF(this, function (b) { var d = Eb("528") ? /&nbsp;/g : /\u00A0/g; return b.replace(d, " ") })) };
        t.xr = function (b, c, d) { return !d ? m : " " == c ? (this.D.execCommand("+removeFormat"), j) : m };
        a.YF = function (b, c) { for (var d = b.D.m() ; c && c != d;) { if ("TABLE" == c.tagName) return c; c = c.parentNode } return k }, a.XF = function (b, c) {
            var d = iw(b.D); if (!(1 < d.dj())) {
                if (B) {
                    var e = tD(d, b.D.m()), g = YF(b, e.W()), h = YF(b, e.ha()); if (g || h) { if (g == h) return; var l, n = d; l = g; var d = h, e = new nD(n), q = n.W(), r = n.ua(), w = n.ha(), n = n.Ia(), C = bD(b); if (l) { var I = C.createTextNode(""); lc(I, l); q = I; r = 0 } d && (I = C.createTextNode(""), kc(I, d), w = I, n = 0); Dq(q, r, w, n).select(); l = e; g || (d = L($C(l, j)), b.bA = d); h || (d = L($C(l, m)), b.Lv = d); d = iw(b.D); e = tD(d, b.D.m()) } e.select();
                    d = e
                } q = d; d = bD(b).w("div"); e = q.Sd(); Xq ? d.appendChild(e.cloneContents()) : Wq && (r = q.Lc(), r = r.replace(/\r\n/g, "\r"), w = r.length, q = w - r.replace(/^[\s\xa0]+/, "").length, r = w - Ma(r).length, e.moveStart("character", q), e.moveEnd("character", -r), q = e.htmlText, "Formatted" == e.queryCommandValue("formatBlock") && (q = Oa(e.htmlText)), d.innerHTML = q); q = c(d.innerHTML); C = iw(b.D); d = bD(b); r = db(); e = db(); q = '<span id="' + r + '"></span>' + q + '<span id="' + e + '"></span>'; n = db(); w = '<span id="' + n + '"></span>'; if (Wq) {
                    I = C.ye(0).Sd(); I.pasteHTML(w);
                    for (var G; (G = I.parentElement()) && At(G) && !mD(G) ;) { C = G.nodeName; if ("TD" == C || "TR" == C || "TH" == C) break; L(G) } I.pasteHTML(q); (n = d.m(n)) && L(n)
                } else if (Xq) {
                    d.Da().execCommand("insertImage", m, n); C = RegExp("<[^<]*" + n + "[^>]*>"); G = iw(b.D).Eb(); 3 == G.nodeType && (G = G.parentNode); for (; !C.test(G.innerHTML) ;) G = G.parentNode; if (B) G.innerHTML = G.innerHTML.replace(C, q); else {
                        G.innerHTML = G.innerHTML.replace(C, w); for (G = n = d.m(n) ; (G = n.parentNode) && At(G) && !mD(G) ;) { C = G.nodeName; if ("TD" == C || "TR" == C || "TH" == C) break; lc(n, G); L(G) } G.innerHTML =
                        G.innerHTML.replace(RegExp(w, "i"), q)
                    }
                } G = d.m(r); d = d.m(e); Dq(G, 0, d, d.childNodes.length).select(); L(G); L(d); B && l && (d = iw(b.D), G = b.D.m(), b.bA && (G.insertBefore(b.bA, G.firstChild), b.bA = k), b.Lv && (G.appendChild(b.Lv), b.Lv = k), G = k, e = $C(l, j), q = $C(l, m), e && q && (G = Dq(e, 0, q, 0)), dD((g ? G : d).W(), (g ? G : d).ua(), (h ? G : d).ha(), (h ? G : d).Ia()).select(), l.H())
            }
        };
        t.aH = function (b) {
            var c = document.createElement("div"); c.innerHTML = b; for (var b = [], c = [c.childNodes, 0], d = [], e = 0, g = [], h = 0, l = 0; 0 <= l; l -= 2) {
                for (var n = m; 0 < h && l <= g[h - 1];) h--, n = j; n && WF(b); for (n = m; 0 < e && l <= d[e - 1];) e--, n = j; n && WF(b); for (var n = c[l], q = c[l + 1]; q < n.length;) {
                    var r = n[q++], w = r.nodeName, C = this.RD(r); if (C != k) b.push(C); else {
                        switch (w) {
                            case "#text": r = 0 < e ? r.nodeValue : Ia(r.nodeValue); r = Va(r); b.push(r); continue; case "P": WF(b); WF(b); break; case "BR": WF(b); continue; case "TABLE": WF(b); g[h++] = l; break; case "PRE": case "XMP": d[e++] =
                            l; break; case "STYLE": case "SCRIPT": case "SELECT": continue; case "A": if (r.href && "" != r.href) { b.push("<a href='"); b.push(r.href); b.push("'>"); b.push(this.aH(r.innerHTML)); b.push("</a>"); continue } else break; case "IMG": b.push("<img src='"); b.push(r.src); b.push("'"); "0" == r.border && b.push(" border='0'"); b.push(">"); continue; case "TD": r.previousSibling && b.push(" "); break; case "TR": r.previousSibling && WF(b); break; case "DIV": if (C = r.parentNode, C.firstChild == r && VF.test(C.tagName)) break; default: VF.test(w) && WF(b)
                        } r =
                        r.childNodes; 0 < r.length && (c[l++] = n, c[l++] = q, n = r, q = 0)
                    }
                }
            } return b.join("").replace(/\xa0|[ \t]+/g, " ")
        }; t.RD = s(k); a.ZF = function () { UF.call(this) }; y(ZF, UF); ZF.prototype.RD = function (b) { var c; if ("IMG" !== b.nodeName) return k; c = []; c.push('<img src="'); c.push(Va(b.src)); c.push('"'); b.getAttribute("eeimg") && b.getAttribute("alt") && c.push(' eeimg="' + Va(b.getAttribute("eeimg")) + '" alt="' + Va(b.getAttribute("alt")) + '"'); c.push(">"); return c.join("") }; a.$F = function (b) { qE.call(this, b); this.P = new ne(this); this.GA = "http://upload." + ch.Mo + ":" + location.port + "/upload"; this.KK = !A }; y($F, qE); a.aG = function (b) { hd.call(this, "ok"); var c = b[0]; this.Cl = c; this.BG = c.replace("_m.jpg", "_r.jpg"); this.VG = b[1]; this.UG = b[2] }; y(aG, hd); t = $F.prototype; t.template = Rk('<div class="zm-img-uploader"><iframe src="about:blank" name="av_up_frame" style="position: absolute; height: 0; width: 0; left: -9000px; "></iframe><div class="zg-section zm-img-uploader-tab"><a href="javascript:;" class="tab-nav selected">上传图片</a> 或 <a href="javascript:;" class="tab-nav">引用站外图片</a></div><form class="zg-clear" target="av_up_frame" method="POST" enctype="multipart/form-data" action="<%= uploadURL %>"><div class="tab-content selected <% if (canStylize) { %>inline<% } %>"><% if (canStylize) { %><input type="file" name="upload_file" style="opacity:0;height:0;width:0;font-size:0;position:absolute;"><a href="javascript:;" class="browser zg-btn-blue">选择图片</a><% } else { %><input type="file" name="upload_file"><% } %></div><div class="tab-content"><input type="text" autocomplete="off" name="upload_file_url" class="zm-editable-editor-input zg-form-text-input"><a href="javascript:;" class="insert zg-btn-blue zm-uploader-button-fix">确认</a></div><span style="display: none; " class="zm-img-uploader-loading">正在上传</span><span style="display: none; " class="zm-img-uploader-error">上传图片失败，请稍后重试</span></form><div class="zg-gray">请不要上传与回答问题无关的图片，详细请看 <a href="http://www.zhihu.com/question/20064580" target="_blank">知乎图片使用规范</a></div><div class="zm-command"><a class="cancel" href="javascript:;">取消</a></div></div>');
        t.kv = function () {
            var b = gc(this.template({ uploadURL: this.GA, canStylize: this.KK })); F.forEach({ form: "form", jA: ".zm-img-uploader-tab", Uh: ".zm-img-uploader-loading", Hf: ".zm-img-uploader-error", WH: "input[type=text]", sn: "input[type=file]", ZB: ".browser", Vu: ".cancel", MO: ".insert" }, function (c, e) { this[e] = $(c, b).get(0) }, this); this.P.e(Y, Sl, this.xu).e(this.sn, "change", this.NR).e(this.MO, "click", this.NO).e(this.Vu, "click", function () { this.Gw(); this.hide() }).e(this.jA, "click", function (b) {
                b = $(b.target); b.is("a") &&
                !b.is(".selected") && bG(this, b.index())
            }); this.uC = b; Tg || (bG(this, 1), $(this.jA).replaceWith("<strong>输入站外图片地址：</strong>")); this.ZB && this.P.e(this.ZB, "click", function () { this.sn.click() }); var c = new rE(this); c.ab("插入图片").Ja(this.uC); c = uE(c); ii(c, k); return c
        }; t.NR = function () { if (this.sn.value) { var b = this.sn.value, b = String(b).toLowerCase(); (!b ? 0 : z.some([".jpg", ".jpeg", ".gif", ".png"], function (c) { return Fa(b, c) })) ? (this.WH.value = "", cG(this)) : dG(this, "图片不是 .jpg、.png 或 .gif 格式，无法上传。") } };
        t.NO = function () { var b = Bk(this.WH.value); b ? Ea(b, "http://") ? (this.sn.value = "", cG(this)) : dG(this, "我们目前不支持该协议。") : dG(this, "请填写图片地址。") }; a.bG = function (b, c) { function d(b) { b.eq(c).addClass("selected").siblings().removeClass("selected") } var e = $(".tab-nav", b.jA), g = $(".tab-content", b.form); Q(b.Hf, m); var h = g.eq(c); h.find("input").val(""); d(e); d(g); h.find(":text").focus() }, a.dG = function (b, c) { Q(b.Uh, m); b.Hf.innerHTML = c; Q(b.Hf, j) }; t.xu = function (b) { Q(this.Uh, m); this.$j(b.pc) };
        t.$j = function (b) { b && !b.r ? (this.dispatchEvent(this.cn(b.msg)), this.hide()) : dG(this, b.msg) }; a.cG = function (b) { Q(b.Uh, j); Q(b.Hf, m); b.form.submit() }; t.cn = function (b) { return new aG(b) }; t.z = function () { this.P.H(); this.P = k; $F.n.z.call(this) }; a.eG = function () { vE.call(this, "image"); this.P = new ne(this) }; y(eG, vE); t = eG.prototype; t.jd = lf("ImageDialogPlugin"); t.af = function (b, c) { var d = this.D; return !d.jf && (d.Mf(), !d.jf) ? m : eG.n.af.call(this, b, c) };
        t.ij = function (b) { if (b && "mouseup" === b.type) { var c = b.target; c && "IMG" === c.nodeName && (b = wD(c), b || (b = document.createElement("br"), lc(b, c)), zt(b)) } }; t.Bn = function (b) { eG.n.Bn.call(this, b) }; t.jv = function (b) { b = new $F(b); this.P.e(b, "ok", this.Fn).e(b, "cancel", this.Hw); return b }; t.z = function () { eG.n.z.call(this); this.P.H() };
        t.Fn = function (b) { xE(this); var c = bD(this), d; d = b.BG ? c.w("IMG", { "class": "origin_image zh-lightbox-thumb", "data-original": b.BG, title: "点击查看原图", src: b.Cl }) : c.w("IMG", { "class": "content_image", src: b.Cl }); b.VG && d.setAttribute("data-rawwidth", b.VG); b.UG && d.setAttribute("data-rawheight", b.UG); b = iw(this.D); if (sD(b)) b.ag(d), A || (Xs(d, m), c.Sa().focus()), Kv(this.D), this.D.Ze(); else return k; this.P.removeAll() }; t.Hw = function () { this.P.removeAll() }; a.fG = function (b) { qE.call(this, b); this.P = new ne(this) }; y(fG, qE); a.gG = function (b, c, d, e, g) { hd.call(this, "ok"); this.xU = b; this.vU = c; this.wU = g; this.qT = d; this.poster = e }; y(gG, hd); t = fG.prototype; t.show = function () { fG.n.show.call(this); this.Wt.focus() }; t.hide = function () { fG.n.hide.call(this) };
        t.kv = function () {
            var b = "http://upload." + ch.Mo + ":" + location.port + "/upload_video", b = this.fd.w("div", "zm-img-uploader zm-img-uploader-upload-tab-selected", [this.fd.w("div", "zg-section", this.fd.w("strong", k, "输入视频页地址：")), this.ZY = this.fd.w("iframe", { id: "video_up_frame", src: "about:_blank", name: "video_up_frame", style: "visible:hidden;position:absolute;height:0;width:0;left:-9000px" }), this.tn = this.fd.w("form", { "class": "zg-section-title", target: "video_up_frame", method: "post", enctype: "multipart/form-data", action: b },
            [this.Wt = this.fd.w("input", { type: "text", "class": "zg-form-text-input", name: "upload_file_url", autocomplete: "off" }), this.an = this.fd.w("a", { "class": "zg-btn-blue zm-uploader-button-fix", name: "save", href: "javascript:;" }, "确定"), this.fd.w("div", "zm-video-uploader-info", [this.Uh = this.fd.w("span", { style: "display:none", "class": "zm-img-uploader-loading" }, "正在上传"), this.Hf = this.fd.w("span", { style: "display:none", "class": "zm-img-uploader-error" }, "插入视频失败，请稍后重试")])]), this.yO = this.fd.w("div", "zg-gray"), this.Hi = this.fd.w("div",
            "zm-command", [this.Vu = this.fd.w("a", { href: "javascript:;" }, "取消")])]); this.yO.innerHTML = '我们目前支持<a class="zg-link-gray" target="_blank" href="http://youku.com">优酷</a>、<a class="zg-link-gray" target="_blank" href="http://tudou.com">土豆</a>、<a href="http://video.sina.com.cn/" class="zg-link-gray" target="_blank">新浪</a>、<a href="http://v.qq.com/" class="zg-link-gray" target="_blank">腾讯</a>、<a href="http://www.56.com/" class="zg-link-gray" target="_blank">56</a>、<a href="http://tv.sohu.com/" class="zg-link-gray" target="_blank">搜狐</a>、<a href="http://www.iqiyi.com/" class="zg-link-gray" target="_blank">爱奇艺</a>视频服务。<br />请不要上传与回答问题无关的视频，详细请看 <a href="http://www.zhihu.com/question/20118966" target="_blank">知乎视频使用规范</a>';
            this.P.e(this.Vu, "click", function () { this.Gw(); this.hide() }).e(this.an, "click", this.MG).e(this.Hi, "click", this.ka).e(this.tn, "submit", function () { return hG(this, this.Wt.value) }).e(Y, Sl, this.xu); this.uC = b; var c = new rE(this); c.ab("插入视频").Ja(b); b = uE(c); ii(b, k); return b
        }; a.hG = function (b, c) { c = Bk(c); if (!c) return m; var d = c.match(/[\-a-zA-Z0-9@:%_\+.~#?&\/\/=]{2,256}\.[a-z]{2,4}\b(\/[\-a-zA-Z0-9@:%_\+.~#?&\/\/=]*)?/gi); d || (Q(b.Uh, m), b.Hf.innerHTML = "我们无法识别你输入的视频页地址", Q(b.Hf, j)); return d };
        t.MG = function () { if (this.Wt.value) { var b = Bk(this.Wt.value); b && hG(this, b) && (Q(this.Uh, j), Q(this.Hf, m), this.tn.submit()) } }; t.ka = function (b) { "save" === (b.target && b.target.name) && this.MG() }; t.xu = function (b) { Q(this.Uh, m); this.$j(b.pc) }; t.$j = function (b) { b && !b.r ? (this.dispatchEvent(this.cn(b.msg[0], b.msg[1], b.msg[2], b.msg[3], b.msg[4])), this.hide()) : (b = b.msg, Q(this.Uh, m), this.Hf.innerHTML = b, Q(this.Hf, j)) }; t.cn = function (b, c, d, e, g) { return new gG(b, c, d, e, g) }; t.z = function () { this.P.H(); this.P = k; fG.n.z.call(this) };
        a.iG = function () { vE.call(this, rD); this.P = new ne(this) }; y(iG, vE); t = iG.prototype; t.jd = lf("VideoDialogPlugin"); t.af = function (b, c) { var d = this.D; return !d.jf && (d.Mf(), !d.jf) ? m : iG.n.af.call(this, b, c) }; t.Bn = function (b) { iG.n.Bn.call(this, b) }; t.jv = function (b) { b = new fG(b); this.P.e(b, "ok", this.Fn).e(b, "cancel", this.Hw); return b }; t.z = function () { iG.n.z.call(this); this.P.H() };
        t.Fn = function (b) {
            xE(this); var c = bD(this), d = c.w("embed"); F.forEach({ type: "application/x-shockwave-flash", allowscriptaccess: "always", allowfullscreen: "true", wmode: "opaque", "class": "video", width: "420", height: "350", src: b.xU, "data-poster": b.poster, "data-name": b.wU, "data-videoid": b.vU, "data-sourceurl": b.qT }, function (b, c) { d.setAttribute(c, b) }); b = Vs(d); Fa(b, '">') && (b += "</embed>"); var b = gc(b + " "), e = b.firstChild, g = iw(this.D); if (sD(g)) g.ag(b), A ? document.selection && (c = document.selection.createRange(), c.move("character",
            -1), c.select()) : (Xs(e), c.Sa().focus()), Kv(this.D), this.D.Ze(); else return k; this.P.removeAll()
        }; t.Hw = function () { this.P.removeAll() }; a.Bt = j, a.jG = Gv.prototype.execCommand; Gv.prototype.execCommand = function (b) { var c = this.D; return F.contains(CD, b) && !c.jf ? (c.Mf(), m) : jG.apply(this, arguments) }; a.kG = vE.prototype.execCommand, a.lG = ["+equation"]; vE.prototype.execCommand = function (b) { var c = this.D; return z.contains(lG, b) && !c.jf && (c.Mf(), !c.jf) ? m : kG.apply(this, arguments) }; rD = "video"; xD = kb ? "⌘" : "ctrl"; aB[rD] = { xa: rD, R: "插入视频", Ma: "tr-icon tr-video", factory: aA }; aB["+equation"] = { xa: "+equation", R: gA.ZV, Ma: "tr-icon tr-equation", factory: aA };
        aB["+bold"].R = "粗体 (" + xD + "+b)"; aB["+italic"].R = "斜体 (" + xD + "+i)"; aB["+underline"].R = "下划线 (" + xD + "+u)"; aB["+superscript"].R = "引用内容"; aB["+insertOrderedList"].R = "有序列表"; aB["+insertUnorderedList"].R = "无序列表"; aB["+removeFormat"].R = "清除格式"; aB.image.R = "插入图片"; aB[rD].R = "插入视频"; aB["+equation"].R = "插入公式"; a.mG = function () { }; ia(mG);
        mG.prototype.xg = function (b, c) {
            this.config = c; var d, e, g; e = J("zm-editable-toolbar-container", b); d = J("zm-editable-editor-outer", b); g = J("zm-editable-editor-field-element", b); var h = new ow(g.id); h.CK = 89; var l = []; c.enableFullScreen && l.push("toggleFullScreen"); l.push("+bold", "+italic", "+underline", new VE, "+blockquote", "+code", "+insertOrderedList", "+insertUnorderedList", "+equation"); c.canUploadMedia_ && l.push(new VE, "image", rD); c.useRemoveFormat_ && l.push(new VE, "+removeFormat"); var n = Tb(e); g = []; for (var q = 0,
            r; r = l[q]; q++) { if (oa(r)) { var w = i; if (r = aB[r]) { var w = r.factory || bA, C = r.xa, I = r.R, G = r.caption, R = r.Ma, X = n || Tb(), w = w(C, I, G, R, k, X); r.gb && (w.gb = j) } r = w } r && g.push(r) } var l = Tb(e), ja = new lD(dz.T(), Ip, l), l = eg(e); ja.ki(l); ja.Ne(m); for (n = 0; q = g[n]; n++) lp(q, 32, m), q.ki(l), ja.J(q, j); ja.Y(e); new XE(h, ja); Sc(h, ja); aD(h, new BD); aD(h, new KE); if (c.loremIpsum_ && (aD(h, new LE(c.loremIpsum_)), B)) h.on("load", function () { xd(h.m(), "focus", function () { h.execCommand("clearlorem", j) }) }); aD(h, new VD); aD(h, new ZF); aD(h, new PE); e = new MF;
            aD(h, e); aD(h, new eG); aD(h, new iG); aD(h, new vF); aD(h, new rF); aD(h, new sF); aD(h, new FF); c.enableFullScreen && (d = new eB({ title: "写作模式", kk: d }), aD(h, d)); h.on("load", function () { c.useScraper_ && this.Ur(h, ja) }, m, this); return [h, ja]
        }; mG.prototype.Ur = function (b, c) { var d = b.m(), e = new Cw; e.o(d); var g = K("div", { style: "display:none", className: "tr-spinner spinner-gray" }); c.m().appendChild(g); e.on("willScrape", function () { Q(g, j) }).on("didScrape", function () { Q(g, m) }); Sc(b, e) };
        Ca("ZH.createRichTextEditor", function (b, c) { return mG.T().xg(b, c) }); If("rich_text_editor");
    }
})(zhihu);
//@ sourceURL=http://static.zhihu.com/static/compiled/rich_text_editor.js